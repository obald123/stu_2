{"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\server.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\server.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":21}},"16":{"start":{"line":16,"column":0},"end":{"line":16,"column":34}},"17":{"start":{"line":17,"column":0},"end":{"line":17,"column":32}},"18":{"start":{"line":18,"column":18},"end":{"line":18,"column":53}},"19":{"start":{"line":19,"column":15},"end":{"line":19,"column":47}},"20":{"start":{"line":20,"column":17},"end":{"line":20,"column":42}},"21":{"start":{"line":21,"column":21},"end":{"line":21,"column":68}},"22":{"start":{"line":22,"column":21},"end":{"line":22,"column":68}},"23":{"start":{"line":23,"column":22},"end":{"line":23,"column":70}},"24":{"start":{"line":24,"column":18},"end":{"line":24,"column":60}},"25":{"start":{"line":25,"column":17},"end":{"line":25,"column":51}},"26":{"start":{"line":26,"column":23},"end":{"line":26,"column":76}},"27":{"start":{"line":27,"column":0},"end":{"line":27,"column":26}},"28":{"start":{"line":28,"column":15},"end":{"line":28,"column":42}},"29":{"start":{"line":29,"column":0},"end":{"line":29,"column":39}},"30":{"start":{"line":30,"column":13},"end":{"line":30,"column":37}},"31":{"start":{"line":31,"column":0},"end":{"line":35,"column":4}},"32":{"start":{"line":36,"column":0},"end":{"line":36,"column":42}},"33":{"start":{"line":38,"column":0},"end":{"line":38,"column":46}},"34":{"start":{"line":40,"column":0},"end":{"line":40,"column":70}},"35":{"start":{"line":41,"column":0},"end":{"line":41,"column":71}},"36":{"start":{"line":42,"column":0},"end":{"line":45,"column":3}},"37":{"start":{"line":43,"column":4},"end":{"line":43,"column":39}},"38":{"start":{"line":44,"column":4},"end":{"line":44,"column":34}},"39":{"start":{"line":46,"column":0},"end":{"line":48,"column":3}},"40":{"start":{"line":47,"column":4},"end":{"line":47,"column":38}},"41":{"start":{"line":50,"column":21},"end":{"line":73,"column":1}},"42":{"start":{"line":51,"column":4},"end":{"line":51,"column":51}},"43":{"start":{"line":52,"column":4},"end":{"line":52,"column":43}},"44":{"start":{"line":53,"column":4},"end":{"line":53,"column":39}},"45":{"start":{"line":55,"column":26},"end":{"line":55,"column":60}},"46":{"start":{"line":57,"column":4},"end":{"line":60,"column":5}},"47":{"start":{"line":58,"column":8},"end":{"line":58,"column":44}},"48":{"start":{"line":59,"column":8},"end":{"line":59,"column":15}},"49":{"start":{"line":62,"column":4},"end":{"line":65,"column":5}},"50":{"start":{"line":63,"column":8},"end":{"line":63,"column":44}},"51":{"start":{"line":64,"column":8},"end":{"line":64,"column":15}},"52":{"start":{"line":67,"column":4},"end":{"line":70,"column":5}},"53":{"start":{"line":68,"column":8},"end":{"line":68,"column":44}},"54":{"start":{"line":69,"column":8},"end":{"line":69,"column":15}},"55":{"start":{"line":72,"column":4},"end":{"line":72,"column":40}},"56":{"start":{"line":74,"column":0},"end":{"line":74,"column":30}},"57":{"start":{"line":75,"column":13},"end":{"line":75,"column":17}},"58":{"start":{"line":77,"column":4},"end":{"line":77,"column":54}},"59":{"start":{"line":78,"column":4},"end":{"line":80,"column":7}},"60":{"start":{"line":79,"column":8},"end":{"line":79,"column":54}},"61":{"start":{"line":81,"column":4},"end":{"line":81,"column":18}},"62":{"start":{"line":84,"column":4},"end":{"line":86,"column":5}},"63":{"start":{"line":85,"column":8},"end":{"line":85,"column":23}},"64":{"start":{"line":89,"column":0},"end":{"line":91,"column":1}},"65":{"start":{"line":90,"column":4},"end":{"line":90,"column":18}},"66":{"start":{"line":93,"column":0},"end":{"line":99,"column":4}},"67":{"start":{"line":93,"column":28},"end":{"line":99,"column":2}},"68":{"start":{"line":94,"column":4},"end":{"line":96,"column":5}},"69":{"start":{"line":95,"column":8},"end":{"line":95,"column":23}},"70":{"start":{"line":97,"column":4},"end":{"line":97,"column":31}},"71":{"start":{"line":98,"column":4},"end":{"line":98,"column":20}},"72":{"start":{"line":100,"column":0},"end":{"line":106,"column":4}},"73":{"start":{"line":100,"column":27},"end":{"line":106,"column":2}},"74":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"75":{"start":{"line":102,"column":8},"end":{"line":102,"column":23}},"76":{"start":{"line":104,"column":4},"end":{"line":104,"column":31}},"77":{"start":{"line":105,"column":4},"end":{"line":105,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":42,"column":21},"end":{"line":42,"column":22}},"loc":{"start":{"line":42,"column":35},"end":{"line":45,"column":1}},"line":42},"9":{"name":"(anonymous_9)","decl":{"start":{"line":46,"column":25},"end":{"line":46,"column":26}},"loc":{"start":{"line":46,"column":39},"end":{"line":48,"column":1}},"line":46},"10":{"name":"(anonymous_10)","decl":{"start":{"line":50,"column":21},"end":{"line":50,"column":22}},"loc":{"start":{"line":50,"column":46},"end":{"line":73,"column":1}},"line":50},"11":{"name":"startServer","decl":{"start":{"line":76,"column":9},"end":{"line":76,"column":20}},"loc":{"start":{"line":76,"column":23},"end":{"line":82,"column":1}},"line":76},"12":{"name":"(anonymous_12)","decl":{"start":{"line":78,"column":38},"end":{"line":78,"column":39}},"loc":{"start":{"line":78,"column":44},"end":{"line":80,"column":5}},"line":78},"13":{"name":"stopServer","decl":{"start":{"line":83,"column":9},"end":{"line":83,"column":19}},"loc":{"start":{"line":83,"column":22},"end":{"line":87,"column":1}},"line":83},"14":{"name":"(anonymous_14)","decl":{"start":{"line":93,"column":22},"end":{"line":93,"column":23}},"loc":{"start":{"line":93,"column":28},"end":{"line":99,"column":2}},"line":93},"15":{"name":"(anonymous_15)","decl":{"start":{"line":93,"column":62},"end":{"line":93,"column":63}},"loc":{"start":{"line":93,"column":75},"end":{"line":99,"column":1}},"line":93},"16":{"name":"(anonymous_16)","decl":{"start":{"line":100,"column":21},"end":{"line":100,"column":22}},"loc":{"start":{"line":100,"column":27},"end":{"line":106,"column":2}},"line":100},"17":{"name":"(anonymous_17)","decl":{"start":{"line":100,"column":61},"end":{"line":100,"column":62}},"loc":{"start":{"line":100,"column":74},"end":{"line":106,"column":1}},"line":100}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":30,"column":13},"end":{"line":30,"column":37}},"type":"binary-expr","locations":[{"start":{"line":30,"column":13},"end":{"line":30,"column":29}},{"start":{"line":30,"column":33},"end":{"line":30,"column":37}}],"line":30},"9":{"loc":{"start":{"line":57,"column":4},"end":{"line":60,"column":5}},"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":60,"column":5}},{"start":{},"end":{}}],"line":57},"10":{"loc":{"start":{"line":57,"column":8},"end":{"line":57,"column":99}},"type":"binary-expr","locations":[{"start":{"line":57,"column":8},"end":{"line":57,"column":38}},{"start":{"line":57,"column":42},"end":{"line":57,"column":65}},{"start":{"line":57,"column":69},"end":{"line":57,"column":99}}],"line":57},"11":{"loc":{"start":{"line":62,"column":4},"end":{"line":65,"column":5}},"type":"if","locations":[{"start":{"line":62,"column":4},"end":{"line":65,"column":5}},{"start":{},"end":{}}],"line":62},"12":{"loc":{"start":{"line":62,"column":8},"end":{"line":62,"column":64}},"type":"binary-expr","locations":[{"start":{"line":62,"column":8},"end":{"line":62,"column":36}},{"start":{"line":62,"column":40},"end":{"line":62,"column":64}}],"line":62},"13":{"loc":{"start":{"line":67,"column":4},"end":{"line":70,"column":5}},"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":70,"column":5}},{"start":{},"end":{}}],"line":67},"14":{"loc":{"start":{"line":67,"column":8},"end":{"line":67,"column":76}},"type":"binary-expr","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":40}},{"start":{"line":67,"column":44},"end":{"line":67,"column":76}}],"line":67},"15":{"loc":{"start":{"line":84,"column":4},"end":{"line":86,"column":5}},"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":86,"column":5}},{"start":{},"end":{}}],"line":84},"16":{"loc":{"start":{"line":89,"column":0},"end":{"line":91,"column":1}},"type":"if","locations":[{"start":{"line":89,"column":0},"end":{"line":91,"column":1}},{"start":{},"end":{}}],"line":89},"17":{"loc":{"start":{"line":94,"column":4},"end":{"line":96,"column":5}},"type":"if","locations":[{"start":{"line":94,"column":4},"end":{"line":96,"column":5}},{"start":{},"end":{}}],"line":94},"18":{"loc":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},{"start":{},"end":{}}],"line":101}},"s":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":1,"11":1,"12":1,"13":8,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":2,"43":2,"44":2,"45":2,"46":2,"47":0,"48":0,"49":2,"50":0,"51":0,"52":2,"53":0,"54":0,"55":2,"56":1,"57":1,"58":10,"59":10,"60":6,"61":10,"62":7,"63":7,"64":1,"65":0,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":1,"73":1,"74":1,"75":1,"76":1,"77":1},"f":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":0,"6":1,"7":8,"8":1,"9":1,"10":2,"11":10,"12":6,"13":7,"14":0,"15":0,"16":1,"17":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,1],"4":[1,1],"5":[1,1,1],"6":[5,3],"7":[8,8],"8":[1,0],"9":[0,2],"10":[2,2,2],"11":[0,2],"12":[2,2],"13":[0,2],"14":[2,2],"15":[7,0],"16":[0,1],"17":[0,0],"18":[1,0]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/server.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/server.ts"],"names":[],"mappings":"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","sourcesContent":["import express, { ErrorRequestHandler } from \"express\";\r\nimport cors from \"cors\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\nimport authRoutes from \"./routes/authRoutes\";\r\nimport userRoutes from \"./routes/userRoutes\";\r\nimport adminRoutes from \"./routes/adminRoutes\";\r\nimport swaggerDocs from \"./docs/swagger\";\r\nimport dotenv from \"dotenv\";\r\nimport authenticate from \"./middleware/authenticate\";\r\n\r\ndotenv.config();\r\n\r\nconst prisma = new PrismaClient();\r\nexport const app = express();\r\nconst port = process.env.PORT || 8000;\r\n\r\napp.use(\r\n  cors({\r\n    origin: '*',\r\n    methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\r\n    allowedHeaders: ['Content-Type', 'Authorization'],\r\n  })\r\n);\r\napp.use(express.json());\r\n\r\n// Public routes (no auth required)\r\napp.use(\"/api\", authRoutes);\r\n\r\n// Protected routes (require auth)\r\napp.use(\"/api\", authenticate, userRoutes);\r\napp.use(\"/api\", authenticate, adminRoutes);\r\n\r\napp.get(\"/\", (req, res) => {\r\n  console.log(\"Root route accessed\");\r\n  res.send(\"Server is running\");\r\n});\r\n\r\napp.get(\"/test\", (req, res) => {\r\n  res.send(\"Test route is working\");\r\n});\r\n\r\n// Error handling middleware\r\nconst errorHandler: ErrorRequestHandler = (err, req, res, next) => {\r\n  console.error(\"--- Express Error Handler ---\");\r\n  console.error(\"Message:\", err.message);\r\n  console.error(\"Stack:\", err.stack);\r\n\r\n  // Default error response format\r\n  const errorResponse = { error: \"Internal Server Error\" };\r\n\r\n  // Handle validation errors\r\n  if (err.name === 'ValidationError' || err.name === 'ZodError' || err.name === 'BadRequestError') {\r\n    res.status(400).json(errorResponse);\r\n    return;\r\n  }\r\n\r\n  // Handle Prisma database errors\r\n  if (typeof err.code === 'string' && err.code.startsWith('P')) {\r\n    res.status(500).json(errorResponse);\r\n    return;\r\n  }\r\n\r\n  // Handle JWT errors\r\n  if (err.name === 'JsonWebTokenError' || err.name === 'TokenExpiredError') {\r\n    res.status(401).json(errorResponse);\r\n    return;\r\n  }\r\n\r\n  // Default internal server error\r\n  res.status(500).json(errorResponse);\r\n};\r\n\r\napp.use(errorHandler);\r\n\r\nlet server: any = null;\r\n\r\nexport function startServer() {\r\n  swaggerDocs(app, Number(port));\r\n  server = app.listen(port, () => {\r\n    console.log(`Server running on port ${port}`);\r\n  });\r\n  return server;\r\n}\r\n\r\nexport function stopServer() {\r\n  if (server) {\r\n    server.close();\r\n  }\r\n}\r\n\r\n// Start server if this file is run directly\r\nif (require.main === module) {\r\n  startServer();\r\n}\r\n\r\n// Graceful shutdown\r\nprocess.on(\"SIGTERM\", async () => {\r\n  if (server) {\r\n    server.close();\r\n  }\r\n  await prisma.$disconnect();\r\n  process.exit(0);\r\n});\r\n\r\nprocess.on(\"SIGINT\", async () => {\r\n  if (server) {\r\n    server.close();\r\n  }\r\n  await prisma.$disconnect();\r\n  process.exit(0);\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"21f8e48f57eab2ecfb310175ffc0b53050885bc4","contentHash":"a9adedfc366089c58f54d7edf21b85b468b197f33f5cb7d520428a0509639233"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\authRoutes.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\authRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":25},"end":{"line":7,"column":65}},"5":{"start":{"line":8,"column":19},"end":{"line":8,"column":69}},"6":{"start":{"line":9,"column":25},"end":{"line":9,"column":65}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":38}},"8":{"start":{"line":12,"column":21},"end":{"line":14,"column":1}},"9":{"start":{"line":12,"column":29},"end":{"line":14,"column":1}},"10":{"start":{"line":13,"column":4},"end":{"line":13,"column":59}},"11":{"start":{"line":16,"column":0},"end":{"line":16,"column":131}},"12":{"start":{"line":17,"column":0},"end":{"line":17,"column":119}},"13":{"start":{"line":19,"column":0},"end":{"line":19,"column":66}},"14":{"start":{"line":20,"column":0},"end":{"line":20,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":12,"column":21},"end":{"line":12,"column":22}},"loc":{"start":{"line":12,"column":29},"end":{"line":14,"column":1}},"line":12},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":29},"end":{"line":12,"column":30}},"loc":{"start":{"line":12,"column":49},"end":{"line":14,"column":1}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":3,"10":20,"11":1,"12":1,"13":1,"14":1},"f":{"0":1,"1":3,"2":20},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/authRoutes.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/authRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,kEAAwF;AACxF,sEAA8C;AAC9C,kEAA4E;AAE5E,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,+CAA+C;AAC/C,MAAM,YAAY,GAAG,CAAC,EAAY,EAAE,EAAE,CAAC,CAAC,GAAQ,EAAE,GAAQ,EAAE,IAAS,EAAE,EAAE;IACvE,OAAO,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AACzD,CAAC,CAAC;AAEF,gBAAgB;AAChB,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,IAAA,kBAAQ,EAAC,+BAAc,CAAC,EAAE,YAAY,CAAC,gCAAe,CAAC,CAAC,CAAC;AAClF,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAA,kBAAQ,EAAC,4BAAW,CAAC,EAAE,YAAY,CAAC,0BAAS,CAAC,CAAC,CAAC;AAEtE,2BAA2B;AAC3B,MAAM,CAAC,GAAG,CAAC,SAAS,EAAE,YAAY,CAAC,4BAAW,CAAC,CAAC,CAAC;AAEjD,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport { registerStudent, loginUser, verifyToken } from \"../controllers/authController\";\r\nimport validate from \"../middleware/validate\";\r\nimport { registerSchema, loginSchema } from \"../validations/authValidation\";\r\n\r\nconst router = Router();\r\n\r\n// Wrap async handlers to properly catch errors\r\nconst asyncHandler = (fn: Function) => (req: any, res: any, next: any) => {\r\n  return Promise.resolve(fn(req, res, next)).catch(next);\r\n};\r\n\r\n// Public routes\r\nrouter.post(\"/register\", validate(registerSchema), asyncHandler(registerStudent));\r\nrouter.post(\"/login\", validate(loginSchema), asyncHandler(loginUser));\r\n\r\n// Token verification route\r\nrouter.get(\"/verify\", asyncHandler(verifyToken));\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"58fa2eb907f12c1748e7a8285b12ce5e718372b0","contentHash":"7955dca6931efe22b838064850c1131da17a614329f0d871b1fac310f8f4a3c4"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\authController.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\authController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":75}},"16":{"start":{"line":16,"column":19},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":23},"end":{"line":17,"column":63}},"18":{"start":{"line":18,"column":17},"end":{"line":18,"column":42}},"19":{"start":{"line":19,"column":29},"end":{"line":19,"column":67}},"20":{"start":{"line":20,"column":15},"end":{"line":20,"column":42}},"21":{"start":{"line":21,"column":18},"end":{"line":21,"column":61}},"22":{"start":{"line":22,"column":24},"end":{"line":78,"column":2}},"23":{"start":{"line":22,"column":44},"end":{"line":78,"column":2}},"24":{"start":{"line":23,"column":4},"end":{"line":77,"column":5}},"25":{"start":{"line":24,"column":70},"end":{"line":24,"column":78}},"26":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"27":{"start":{"line":27,"column":12},"end":{"line":27,"column":95}},"28":{"start":{"line":29,"column":8},"end":{"line":73,"column":9}},"29":{"start":{"line":31,"column":33},"end":{"line":31,"column":83}},"30":{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},"31":{"start":{"line":33,"column":16},"end":{"line":33,"column":81}},"32":{"start":{"line":35,"column":35},"end":{"line":35,"column":78}},"33":{"start":{"line":36,"column":39},"end":{"line":36,"column":99}},"34":{"start":{"line":38,"column":28},"end":{"line":48,"column":14}},"35":{"start":{"line":49,"column":26},"end":{"line":49,"column":129}},"36":{"start":{"line":50,"column":12},"end":{"line":65,"column":15}},"37":{"start":{"line":68,"column":12},"end":{"line":71,"column":13}},"38":{"start":{"line":69,"column":16},"end":{"line":69,"column":30}},"39":{"start":{"line":70,"column":16},"end":{"line":70,"column":23}},"40":{"start":{"line":72,"column":12},"end":{"line":72,"column":26}},"41":{"start":{"line":76,"column":8},"end":{"line":76,"column":20}},"42":{"start":{"line":79,"column":0},"end":{"line":79,"column":42}},"43":{"start":{"line":80,"column":18},"end":{"line":117,"column":2}},"44":{"start":{"line":80,"column":38},"end":{"line":117,"column":2}},"45":{"start":{"line":81,"column":4},"end":{"line":116,"column":5}},"46":{"start":{"line":82,"column":36},"end":{"line":82,"column":44}},"47":{"start":{"line":84,"column":21},"end":{"line":84,"column":71}},"48":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"49":{"start":{"line":86,"column":12},"end":{"line":86,"column":76}},"50":{"start":{"line":88,"column":32},"end":{"line":88,"column":89}},"51":{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},"52":{"start":{"line":90,"column":12},"end":{"line":90,"column":76}},"53":{"start":{"line":93,"column":22},"end":{"line":95,"column":10}},"54":{"start":{"line":96,"column":8},"end":{"line":111,"column":11}},"55":{"start":{"line":114,"column":8},"end":{"line":114,"column":20}},"56":{"start":{"line":115,"column":8},"end":{"line":115,"column":37}},"57":{"start":{"line":118,"column":0},"end":{"line":118,"column":30}},"58":{"start":{"line":119,"column":20},"end":{"line":147,"column":2}},"59":{"start":{"line":119,"column":40},"end":{"line":147,"column":2}},"60":{"start":{"line":121,"column":4},"end":{"line":146,"column":5}},"61":{"start":{"line":122,"column":22},"end":{"line":122,"column":108}},"62":{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},"63":{"start":{"line":124,"column":12},"end":{"line":124,"column":74}},"64":{"start":{"line":126,"column":8},"end":{"line":141,"column":9}},"65":{"start":{"line":127,"column":28},"end":{"line":127,"column":75}},"66":{"start":{"line":128,"column":12},"end":{"line":134,"column":13}},"67":{"start":{"line":129,"column":16},"end":{"line":129,"column":35}},"68":{"start":{"line":130,"column":16},"end":{"line":130,"column":76}},"69":{"start":{"line":133,"column":16},"end":{"line":133,"column":78}},"70":{"start":{"line":137,"column":12},"end":{"line":139,"column":13}},"71":{"start":{"line":138,"column":16},"end":{"line":138,"column":78}},"72":{"start":{"line":140,"column":12},"end":{"line":140,"column":74}},"73":{"start":{"line":144,"column":8},"end":{"line":144,"column":20}},"74":{"start":{"line":145,"column":8},"end":{"line":145,"column":37}},"75":{"start":{"line":148,"column":0},"end":{"line":148,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":22,"column":24},"end":{"line":22,"column":25}},"loc":{"start":{"line":22,"column":44},"end":{"line":78,"column":2}},"line":22},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":78},"end":{"line":22,"column":79}},"loc":{"start":{"line":22,"column":91},"end":{"line":78,"column":1}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":80,"column":18},"end":{"line":80,"column":19}},"loc":{"start":{"line":80,"column":38},"end":{"line":117,"column":2}},"line":80},"11":{"name":"(anonymous_11)","decl":{"start":{"line":80,"column":72},"end":{"line":80,"column":73}},"loc":{"start":{"line":80,"column":85},"end":{"line":117,"column":1}},"line":80},"12":{"name":"(anonymous_12)","decl":{"start":{"line":119,"column":20},"end":{"line":119,"column":21}},"loc":{"start":{"line":119,"column":40},"end":{"line":147,"column":2}},"line":119},"13":{"name":"(anonymous_13)","decl":{"start":{"line":119,"column":74},"end":{"line":119,"column":75}},"loc":{"start":{"line":119,"column":87},"end":{"line":147,"column":1}},"line":119}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":21,"column":18},"end":{"line":21,"column":61}},"type":"binary-expr","locations":[{"start":{"line":21,"column":18},"end":{"line":21,"column":40}},{"start":{"line":21,"column":44},"end":{"line":21,"column":61}}],"line":21},"9":{"loc":{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},"type":"if","locations":[{"start":{"line":26,"column":8},"end":{"line":28,"column":9}},{"start":{},"end":{}}],"line":26},"10":{"loc":{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},"type":"if","locations":[{"start":{"line":32,"column":12},"end":{"line":34,"column":13}},{"start":{},"end":{}}],"line":32},"11":{"loc":{"start":{"line":68,"column":12},"end":{"line":71,"column":13}},"type":"if","locations":[{"start":{"line":68,"column":12},"end":{"line":71,"column":13}},{"start":{},"end":{}}],"line":68},"12":{"loc":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},{"start":{},"end":{}}],"line":85},"13":{"loc":{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},"type":"if","locations":[{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},{"start":{},"end":{}}],"line":89},"14":{"loc":{"start":{"line":122,"column":22},"end":{"line":122,"column":108}},"type":"cond-expr","locations":[{"start":{"line":122,"column":83},"end":{"line":122,"column":89}},{"start":{"line":122,"column":92},"end":{"line":122,"column":108}}],"line":122},"15":{"loc":{"start":{"line":122,"column":22},"end":{"line":122,"column":80}},"type":"binary-expr","locations":[{"start":{"line":122,"column":22},"end":{"line":122,"column":63}},{"start":{"line":122,"column":67},"end":{"line":122,"column":80}}],"line":122},"16":{"loc":{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},"type":"if","locations":[{"start":{"line":123,"column":8},"end":{"line":125,"column":9}},{"start":{},"end":{}}],"line":123},"17":{"loc":{"start":{"line":128,"column":12},"end":{"line":134,"column":13}},"type":"if","locations":[{"start":{"line":128,"column":12},"end":{"line":134,"column":13}},{"start":{"line":132,"column":17},"end":{"line":134,"column":13}}],"line":128},"18":{"loc":{"start":{"line":128,"column":16},"end":{"line":128,"column":63}},"type":"binary-expr","locations":[{"start":{"line":128,"column":16},"end":{"line":128,"column":43}},{"start":{"line":128,"column":47},"end":{"line":128,"column":63}}],"line":128},"19":{"loc":{"start":{"line":137,"column":12},"end":{"line":139,"column":13}},"type":"if","locations":[{"start":{"line":137,"column":12},"end":{"line":139,"column":13}},{"start":{},"end":{}}],"line":137}},"s":{"0":2,"1":29,"2":17,"3":22,"4":29,"5":29,"6":0,"7":0,"8":0,"9":0,"10":51,"11":22,"12":2,"13":4,"14":2,"15":2,"16":2,"17":2,"18":2,"19":2,"20":2,"21":2,"22":2,"23":4,"24":4,"25":4,"26":4,"27":1,"28":3,"29":3,"30":3,"31":2,"32":1,"33":1,"34":1,"35":1,"36":1,"37":0,"38":0,"39":0,"40":0,"41":0,"42":2,"43":2,"44":14,"45":14,"46":14,"47":14,"48":13,"49":3,"50":10,"51":10,"52":8,"53":2,"54":2,"55":1,"56":1,"57":2,"58":2,"59":4,"60":4,"61":4,"62":4,"63":0,"64":4,"65":4,"66":0,"67":0,"68":0,"69":0,"70":4,"71":3,"72":1,"73":0,"74":0,"75":2},"f":{"0":22,"1":29,"2":17,"3":22,"4":29,"5":0,"6":51,"7":4,"8":4,"9":4,"10":14,"11":14,"12":4,"13":4},"b":{"0":[2,2,2],"1":[12,17],"2":[22,22],"3":[22,29],"4":[22,22],"5":[2,2,2],"6":[0,4],"7":[4,4],"8":[2,0],"9":[1,3],"10":[2,1],"11":[0,0],"12":[3,10],"13":[8,2],"14":[0,4],"15":[4,4],"16":[0,4],"17":[0,0],"18":[0,0],"19":[3,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/authController.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/authController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response } from \"express\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\nimport { generateRegistrationNumber } from \"../utils/registrationNumber\";\r\nimport { Role, UserDto, UserResponse, AuthSuccessResponse, MessageResponse } from \"../types\";\r\n\r\nconst prisma = new PrismaClient();\r\nconst jwtSecret = process.env.JWT_SECRET || \"your_jwt_secret\";\r\n\r\nexport const registerStudent = async (\r\n  req: Request<{}, {}, UserDto>,\r\n  res: Response<AuthSuccessResponse | MessageResponse>,\r\n  next: Function,\r\n): Promise<Response<AuthSuccessResponse | MessageResponse> | void> => {\r\n  try {\r\n    const { firstName, lastName, email, password, dateOfBirth } = req.body;\r\n\r\n    // Password validation - match the schema validation message\r\n    if (password.length < 6) {\r\n      return res.status(400).json({ message: \"Password must be at least 6 characters\" });\r\n    }\r\n\r\n    try {\r\n      // Check if user already exists\r\n      const existingUser = await prisma.user.findUnique({ where: { email } });\r\n      if (existingUser) {\r\n        return res.status(400).json({ message: \"Email already in use\" });\r\n      }\r\n\r\n      const hashedPassword = await bcrypt.hash(password, 10);\r\n      const registrationNumber = await generateRegistrationNumber();\r\n\r\n      // Create new user\r\n      const newUser = await prisma.user.create({\r\n        data: {\r\n          firstName,\r\n          lastName,\r\n          email,\r\n          password: hashedPassword,\r\n          registrationNumber,\r\n          dateOfBirth: new Date(dateOfBirth),\r\n          role: \"student\",\r\n        },\r\n      });\r\n\r\n      const token = jwt.sign(\r\n        { userId: newUser.id, role: newUser.role },\r\n        jwtSecret,\r\n        { expiresIn: \"1h\" },\r\n      );\r\n\r\n      return res.status(201).json({\r\n        message: \"Student registered successfully\",\r\n        user: {\r\n          id: newUser.id,\r\n          firstName: newUser.firstName,\r\n          lastName: newUser.lastName,\r\n          email: newUser.email,\r\n          password: newUser.password,\r\n          registrationNumber: newUser.registrationNumber,\r\n          dateOfBirth: newUser.dateOfBirth,\r\n          role: newUser.role as Role,\r\n          createdAt: newUser.createdAt,\r\n          updatedAt: newUser.updatedAt,\r\n        },\r\n        token,\r\n      });\r\n    } catch (dbError) {\r\n      if (dbError instanceof Error) {\r\n        next(dbError);\r\n        return;\r\n      }\r\n      throw dbError;\r\n    }\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n\r\nexport const loginUser = async (\r\n  req: Request,\r\n  res: Response<AuthSuccessResponse | MessageResponse>,\r\n  next: Function,\r\n): Promise<Response<AuthSuccessResponse | MessageResponse>> => {\r\n  try {\r\n    const { email, password } = req.body;\r\n\r\n    // Find user by email\r\n    const user = await prisma.user.findUnique({ where: { email } });\r\n    if (!user) {\r\n      return res.status(401).json({ message: \"Invalid credentials\" });\r\n    }\r\n\r\n    const isPasswordValid = await bcrypt.compare(password, user.password);\r\n    if (!isPasswordValid) {\r\n      return res.status(401).json({ message: \"Invalid credentials\" });\r\n    }\r\n\r\n    // Generate JWT token\r\n    const token = jwt.sign({ userId: user.id, role: user.role }, jwtSecret, {\r\n      expiresIn: \"1h\",\r\n    });\r\n\r\n    return res.status(200).json({\r\n      message: \"Login successful\",\r\n      user: {\r\n        id: user.id,\r\n        firstName: user.firstName,\r\n        lastName: user.lastName,\r\n        email: user.email,\r\n        password: user.password,\r\n        registrationNumber: user.registrationNumber,\r\n        dateOfBirth: user.dateOfBirth,\r\n        role: user.role as Role,\r\n        createdAt: user.createdAt,\r\n        updatedAt: user.updatedAt\r\n      },\r\n      token,\r\n    });\r\n  } catch (error) {\r\n    next(error);\r\n    return Promise.reject(error);\r\n  }\r\n};\r\n\r\nexport const verifyToken = async (\r\n  req: Request,\r\n  res: Response,\r\n  next: Function\r\n): Promise<Response | void> => {\r\n  try {\r\n    const token = req.headers.authorization?.split(\" \")[1];\r\n    \r\n    if (!token) {\r\n      return res.status(401).json({ message: \"No token provided\" });\r\n    }\r\n\r\n    try {\r\n      const decoded = jwt.verify(token, jwtSecret);\r\n      if (typeof decoded === \"object\" && decoded !== null) {\r\n        req.user = decoded as any;\r\n        return res.status(200).json({ valid: true, user: decoded });\r\n      } else {\r\n        return res.status(401).json({ message: \"Token has expired\" });\r\n      }\r\n    } catch (err) {\r\n      if (err instanceof jwt.TokenExpiredError) {\r\n        return res.status(401).json({ message: \"Token has expired\" });\r\n      }\r\n      return res.status(401).json({ message: \"Token has expired\" });\r\n    }\r\n  } catch (error) {\r\n    next(error);\r\n    return Promise.reject(error);\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9ed1a28d1cbff69568444aa3c25f1b66480c810c","contentHash":"94736b3d95f5276f8db189c0379198cfcec1ba7aa469355f439ffaaca726dd16"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\utils\\registrationNumber.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\utils\\registrationNumber.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":64}},"14":{"start":{"line":13,"column":17},"end":{"line":13,"column":42}},"15":{"start":{"line":14,"column":15},"end":{"line":14,"column":42}},"16":{"start":{"line":16,"column":4},"end":{"line":40,"column":7}},"17":{"start":{"line":17,"column":28},"end":{"line":17,"column":73}},"18":{"start":{"line":18,"column":23},"end":{"line":18,"column":42}},"19":{"start":{"line":20,"column":25},"end":{"line":29,"column":10}},"20":{"start":{"line":30,"column":29},"end":{"line":30,"column":30}},"21":{"start":{"line":31,"column":8},"end":{"line":36,"column":9}},"22":{"start":{"line":32,"column":33},"end":{"line":32,"column":94}},"23":{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},"24":{"start":{"line":34,"column":16},"end":{"line":34,"column":50}},"25":{"start":{"line":38,"column":31},"end":{"line":38,"column":73}},"26":{"start":{"line":39,"column":8},"end":{"line":39,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"generateRegistrationNumber","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":35}},"loc":{"start":{"line":15,"column":38},"end":{"line":41,"column":1}},"line":15},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":43},"end":{"line":16,"column":44}},"loc":{"start":{"line":16,"column":56},"end":{"line":40,"column":5}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":31,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":36,"column":9}},{"start":{},"end":{}}],"line":31},"6":{"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":70}},"type":"binary-expr","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":20}},{"start":{"line":31,"column":24},"end":{"line":31,"column":70}}],"line":31},"7":{"loc":{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},{"start":{},"end":{}}],"line":33}},"s":{"0":1,"1":4,"2":4,"3":4,"4":4,"5":4,"6":0,"7":0,"8":0,"9":0,"10":8,"11":4,"12":1,"13":1,"14":1,"15":1,"16":4,"17":4,"18":4,"19":4,"20":4,"21":4,"22":1,"23":1,"24":1,"25":4,"26":4},"f":{"0":4,"1":4,"2":4,"3":4,"4":4,"5":0,"6":8,"7":4,"8":4},"b":{"0":[1,1,1],"1":[0,4],"2":[4,4],"3":[4,4],"4":[4,4],"5":[1,3],"6":[4,1],"7":[1,0]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/utils/registrationNumber.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/utils/registrationNumber.ts"],"names":[],"mappings":";;;;;;;;;;;AAIA,gEAgCC;AApCD,2CAA8C;AAE9C,MAAM,MAAM,GAAG,IAAI,qBAAY,EAAE,CAAC;AAElC,SAAsB,0BAA0B;;QAC9C,MAAM,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAClE,MAAM,MAAM,GAAG,MAAM,WAAW,EAAE,CAAC;QAEnC,wEAAwE;QACxE,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;YAC3C,KAAK,EAAE;gBACL,kBAAkB,EAAE;oBAClB,UAAU,EAAE,MAAM;iBACnB;aACF;YACD,OAAO,EAAE;gBACP,kBAAkB,EAAE,MAAM;aAC3B;SACF,CAAC,CAAC;QAEH,IAAI,cAAc,GAAG,CAAC,CAAC;QAEvB,IAAI,QAAQ,IAAI,QAAQ,CAAC,kBAAkB,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC;YAC/D,MAAM,YAAY,GAAG,QAAQ,CAC3B,QAAQ,CAAC,kBAAkB,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAC/C,EAAE,CACH,CAAC;YACF,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC;gBACzB,cAAc,GAAG,YAAY,GAAG,CAAC,CAAC;YACpC,CAAC;QACH,CAAC;QAED,6CAA6C;QAC7C,MAAM,cAAc,GAAG,cAAc,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAElE,OAAO,GAAG,MAAM,GAAG,cAAc,EAAE,CAAC;IACtC,CAAC;CAAA","sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst prisma = new PrismaClient();\n\nexport async function generateRegistrationNumber(): Promise<string> {\n  const currentYear = new Date().getFullYear().toString().slice(-2);\n  const prefix = `REG${currentYear}`;\n\n  // Find the highest existing registration number with the current prefix\n  const lastUser = await prisma.user.findFirst({\n    where: {\n      registrationNumber: {\n        startsWith: prefix,\n      },\n    },\n    orderBy: {\n      registrationNumber: \"desc\",\n    },\n  });\n\n  let sequenceNumber = 1;\n\n  if (lastUser && lastUser.registrationNumber.startsWith(prefix)) {\n    const lastSequence = parseInt(\n      lastUser.registrationNumber.replace(prefix, \"\"),\n      10,\n    );\n    if (!isNaN(lastSequence)) {\n      sequenceNumber = lastSequence + 1;\n    }\n  }\n\n  // Pad with leading zeros to make it 5 digits\n  const paddedSequence = sequenceNumber.toString().padStart(5, \"0\");\n\n  return `${prefix}${paddedSequence}`;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4ec49b126779320dae1746b13a8e4024290ee3c9","contentHash":"1efac21bc3fa773f84c4c9ffbee31113a7b0d9893c8acaf4d803bcecde057fac"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\validate.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\validate.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":14},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":17},"end":{"line":21,"column":1}},"3":{"start":{"line":4,"column":29},"end":{"line":21,"column":1}},"4":{"start":{"line":5,"column":4},"end":{"line":20,"column":5}},"5":{"start":{"line":6,"column":8},"end":{"line":6,"column":31}},"6":{"start":{"line":7,"column":8},"end":{"line":7,"column":15}},"7":{"start":{"line":10,"column":8},"end":{"line":18,"column":9}},"8":{"start":{"line":12,"column":27},"end":{"line":15,"column":15}},"9":{"start":{"line":12,"column":52},"end":{"line":15,"column":13}},"10":{"start":{"line":16,"column":12},"end":{"line":16,"column":45}},"11":{"start":{"line":17,"column":12},"end":{"line":17,"column":19}},"12":{"start":{"line":19,"column":8},"end":{"line":19,"column":20}},"13":{"start":{"line":22,"column":0},"end":{"line":22,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":17},"end":{"line":4,"column":18}},"loc":{"start":{"line":4,"column":29},"end":{"line":21,"column":1}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":4,"column":29},"end":{"line":4,"column":30}},"loc":{"start":{"line":4,"column":49},"end":{"line":21,"column":1}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":44},"end":{"line":12,"column":45}},"loc":{"start":{"line":12,"column":52},"end":{"line":15,"column":13}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":8},"end":{"line":18,"column":9}},"type":"if","locations":[{"start":{"line":10,"column":8},"end":{"line":18,"column":9}},{"start":{},"end":{}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":3,"4":27,"5":27,"6":17,"7":10,"8":10,"9":10,"10":10,"11":10,"12":0,"13":1},"f":{"0":3,"1":27,"2":10},"b":{"0":[10,0]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/validate.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/validate.ts"],"names":[],"mappings":";;AACA,6BAA6C;AAE7C,MAAM,QAAQ,GACZ,CAAC,MAAoB,EAAE,EAAE,CACzB,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAQ,EAAE;IACxD,IAAI,CAAC;QACH,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACvB,IAAI,EAAE,CAAC;IACT,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,IAAI,KAAK,YAAY,cAAQ,EAAE,CAAC;YAC9B,sDAAsD;YACtD,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;gBACtC,IAAI,EAAE,GAAG,CAAC,IAAI;gBACd,OAAO,EAAE,GAAG,CAAC,OAAO;aACrB,CAAC,CAAC,CAAC;YACJ,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;YACjC,OAAO;QACT,CAAC;QACD,IAAI,CAAC,KAAK,CAAC,CAAC;IACd,CAAC;AACH,CAAC,CAAC;AAEJ,kBAAe,QAAQ,CAAC","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\nimport { AnyZodObject, ZodError } from \"zod\";\r\n\r\nconst validate =\r\n  (schema: AnyZodObject) =>\r\n  (req: Request, res: Response, next: NextFunction): void => {\r\n    try {\r\n      schema.parse(req.body);\r\n      next();\r\n    } catch (error) {\r\n      if (error instanceof ZodError) {\r\n        // Format validation errors to match test expectations\r\n        const errors = error.errors.map(err => ({\r\n          path: err.path,\r\n          message: err.message\r\n        }));\r\n        res.status(400).json({ errors });\r\n        return;\r\n      }\r\n      next(error);\r\n    }\r\n  };\r\n\r\nexport default validate;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"368d094ad22f27757cabe88587a7ba1d93f788f9","contentHash":"b3755a46ff16141c5cbd400d09c56e10b03c130bce4a4abc8a8334260463ca33"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\validations\\authValidation.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\validations\\authValidation.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":54}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":0},"end":{"line":21,"column":3}},"4":{"start":{"line":22,"column":0},"end":{"line":29,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/validations/authValidation.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/validations/authValidation.ts"],"names":[],"mappings":";;;AAAA,6BAAwB;AAEX,QAAA,cAAc,GAAG,OAAC,CAAC,MAAM,CAAC;IACrC,SAAS,EAAE,OAAC;SACT,MAAM,CAAC,EAAE,cAAc,EAAE,wBAAwB,EAAE,CAAC;SACpD,GAAG,CAAC,CAAC,EAAE,EAAE,OAAO,EAAE,+CAA+C,EAAE,CAAC;IACvE,QAAQ,EAAE,OAAC;SACR,MAAM,CAAC,EAAE,cAAc,EAAE,uBAAuB,EAAE,CAAC;SACnD,GAAG,CAAC,CAAC,EAAE,EAAE,OAAO,EAAE,8CAA8C,EAAE,CAAC;IACtE,KAAK,EAAE,OAAC;SACL,MAAM,CAAC,EAAE,cAAc,EAAE,mBAAmB,EAAE,CAAC;SAC/C,KAAK,CAAC,EAAE,OAAO,EAAE,sBAAsB,EAAE,CAAC;IAC7C,QAAQ,EAAE,OAAC;SACR,MAAM,CAAC,EAAE,cAAc,EAAE,sBAAsB,EAAE,CAAC;SAClD,GAAG,CAAC,CAAC,EAAE,EAAE,OAAO,EAAE,wCAAwC,EAAE,CAAC;IAChE,WAAW,EAAE,OAAC;SACX,MAAM,CAAC,EAAE,cAAc,EAAE,2BAA2B,EAAE,CAAC;SACvD,KAAK,CAAC,qBAAqB,EAAE,EAAE,OAAO,EAAE,kCAAkC,EAAE,CAAC;CACjF,CAAC,CAAC;AAEU,QAAA,WAAW,GAAG,OAAC,CAAC,MAAM,CAAC;IAClC,KAAK,EAAE,OAAC;SACL,MAAM,CAAC,EAAE,cAAc,EAAE,mBAAmB,EAAE,CAAC;SAC/C,KAAK,CAAC,EAAE,OAAO,EAAE,sBAAsB,EAAE,CAAC;IAC7C,QAAQ,EAAE,OAAC;SACR,MAAM,CAAC,EAAE,cAAc,EAAE,sBAAsB,EAAE,CAAC;SAClD,GAAG,CAAC,CAAC,EAAE,EAAE,OAAO,EAAE,sBAAsB,EAAE,CAAC;CAC/C,CAAC,CAAC","sourcesContent":["import { z } from \"zod\";\r\n\r\nexport const registerSchema = z.object({\r\n  firstName: z\r\n    .string({ required_error: \"First name is required\" })\r\n    .min(2, { message: \"First name must be at least 2 characters long\" }),\r\n  lastName: z\r\n    .string({ required_error: \"Last name is required\" })\r\n    .min(2, { message: \"Last name must be at least 2 characters long\" }),\r\n  email: z\r\n    .string({ required_error: \"Email is required\" })\r\n    .email({ message: \"Invalid email format\" }),\r\n  password: z\r\n    .string({ required_error: \"Password is required\" })\r\n    .min(6, { message: \"Password must be at least 6 characters\" }),\r\n  dateOfBirth: z\r\n    .string({ required_error: \"Date of birth is required\" })\r\n    .regex(/^\\d{4}-\\d{2}-\\d{2}$/, { message: \"Invalid date format (YYYY-MM-DD)\" }),\r\n});\r\n\r\nexport const loginSchema = z.object({\r\n  email: z\r\n    .string({ required_error: \"Email is required\" })\r\n    .email({ message: \"Invalid email format\" }),\r\n  password: z\r\n    .string({ required_error: \"Password is required\" })\r\n    .min(1, { message: \"Password is required\" }),\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ffaf68b54e4d9c4b59c11e055b3329bb49d93ba0","contentHash":"ddc864b9e9fd8c7e032743f8049966a86b5169e260719e5e88e78ed2b86960be"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\userRoutes.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\userRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":25},"end":{"line":7,"column":65}},"5":{"start":{"line":8,"column":23},"end":{"line":8,"column":77}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":38}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":79}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":88}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/userRoutes.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/userRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,kEAA2E;AAC3E,8EAAsD;AAEtD,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAIxB,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,sBAAY,EAAE,4BAAW,CAAC,CAAC;AACpD,MAAM,CAAC,GAAG,CAAC,mBAAmB,EAAE,sBAAY,EAAE,8BAAa,CAAC,CAAC;AAG7D,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport { getUserById, getUserQRCode } from '../controllers/userController';\r\nimport authenticate from \"../middleware/authenticate\";\r\n\r\nconst router = Router();\r\n\r\n\r\n\r\nrouter.get('/users/:id', authenticate, getUserById);\r\nrouter.get('/users/:id/qrcode', authenticate, getUserQRCode);\r\n\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f6be7c8214e5686e9f06a1ceafcf32a32230854b","contentHash":"50b70d1e6a075cecdd7f8b6d18f44a5d18bff5fcc96e83faa47a127f29ec2337"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\userController.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\userController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":53}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":42}},"17":{"start":{"line":17,"column":17},"end":{"line":17,"column":51}},"18":{"start":{"line":18,"column":15},"end":{"line":18,"column":42}},"19":{"start":{"line":19,"column":20},"end":{"line":45,"column":2}},"20":{"start":{"line":19,"column":34},"end":{"line":45,"column":2}},"21":{"start":{"line":20,"column":19},"end":{"line":20,"column":32}},"22":{"start":{"line":21,"column":4},"end":{"line":44,"column":5}},"23":{"start":{"line":22,"column":21},"end":{"line":36,"column":10}},"24":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"25":{"start":{"line":38,"column":12},"end":{"line":38,"column":71}},"26":{"start":{"line":40,"column":8},"end":{"line":40,"column":97}},"27":{"start":{"line":43,"column":8},"end":{"line":43,"column":74}},"28":{"start":{"line":46,"column":0},"end":{"line":46,"column":34}},"29":{"start":{"line":47,"column":22},"end":{"line":83,"column":2}},"30":{"start":{"line":47,"column":36},"end":{"line":83,"column":2}},"31":{"start":{"line":48,"column":19},"end":{"line":48,"column":32}},"32":{"start":{"line":49,"column":4},"end":{"line":82,"column":5}},"33":{"start":{"line":50,"column":21},"end":{"line":59,"column":10}},"34":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"35":{"start":{"line":61,"column":12},"end":{"line":61,"column":71}},"36":{"start":{"line":63,"column":23},"end":{"line":68,"column":9}},"37":{"start":{"line":69,"column":25},"end":{"line":69,"column":47}},"38":{"start":{"line":70,"column":24},"end":{"line":70,"column":109}},"39":{"start":{"line":72,"column":20},"end":{"line":72,"column":64}},"40":{"start":{"line":73,"column":8},"end":{"line":76,"column":11}},"41":{"start":{"line":77,"column":8},"end":{"line":77,"column":21}},"42":{"start":{"line":80,"column":8},"end":{"line":80,"column":47}},"43":{"start":{"line":81,"column":8},"end":{"line":81,"column":74}},"44":{"start":{"line":84,"column":0},"end":{"line":84,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":20},"end":{"line":19,"column":21}},"loc":{"start":{"line":19,"column":34},"end":{"line":45,"column":2}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":68},"end":{"line":19,"column":69}},"loc":{"start":{"line":19,"column":81},"end":{"line":45,"column":1}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":47,"column":22},"end":{"line":47,"column":23}},"loc":{"start":{"line":47,"column":36},"end":{"line":83,"column":2}},"line":47},"11":{"name":"(anonymous_11)","decl":{"start":{"line":47,"column":70},"end":{"line":47,"column":71}},"loc":{"start":{"line":47,"column":83},"end":{"line":83,"column":1}},"line":47}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},{"start":{},"end":{}}],"line":37},"9":{"loc":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},{"start":{},"end":{}}],"line":60}},"s":{"0":1,"1":6,"2":5,"3":5,"4":6,"5":6,"6":2,"7":0,"8":0,"9":0,"10":9,"11":5,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":3,"21":3,"22":3,"23":3,"24":3,"25":2,"26":1,"27":1,"28":1,"29":1,"30":2,"31":2,"32":2,"33":2,"34":2,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1},"f":{"0":5,"1":6,"2":5,"3":5,"4":6,"5":0,"6":9,"7":1,"8":3,"9":3,"10":2,"11":2},"b":{"0":[1,1,1],"1":[1,5],"2":[5,5],"3":[3,6],"4":[5,5],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[2,1],"9":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/userController.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/userController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response } from \"express\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\nimport { Role, UserResponse, MessageResponse } from \"../types\";\r\nimport QRCode from \"qrcode\";\r\nimport { date } from \"zod\";\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nexport const getUserById = async (\r\n  req: Request,\r\n  res: Response\r\n): Promise<UserResponse | MessageResponse | any > => {\r\n  const userId = req.params.id;\r\n  try {\r\n    const user = await prisma.user.findUnique({\r\n      where: { id: userId },\r\n      select: {\r\n        id: true,\r\n        firstName: true,\r\n        lastName: true,\r\n        email: true,\r\n        registrationNumber: true,\r\n        dateOfBirth: true,\r\n        role: true,\r\n        createdAt: true,\r\n        password: true,\r\n        updatedAt: true,\r\n      },\r\n    });\r\n    if (!user) {\r\n      return res.status(404).json({ message: \"User not found\" });\r\n    }\r\n    return res.status(200).json({ ...user, role: user.role as Role });\r\n  } catch (error) {\r\n    return res.status(500).json({ message: \"Internal server error\" });\r\n  }\r\n};\r\n\r\nexport const getUserQRCode = async (\r\n  req: Request,\r\n  res: Response\r\n): Promise<UserResponse | MessageResponse | any > => {\r\n  const userId = req.params.id;\r\n  try {\r\n    const user = await prisma.user.findUnique({\r\n      where: { id: userId },\r\n      select: {\r\n        firstName: true,\r\n        lastName: true,\r\n        email: true,\r\n        registrationNumber: true,\r\n        dateOfBirth: true,\r\n      },\r\n    });\r\n    if (!user) {\r\n      return res.status(404).json({ message: \"User not found\" });\r\n    }\r\n    const qrData = {\r\n      name: `${user.firstName} ${user.lastName}`,\r\n      email: user.email,\r\n      registrationNumber: user.registrationNumber,\r\n      dateOfBirth: user.dateOfBirth,\r\n    };\r\n    const qrString = JSON.stringify(qrData);\r\n    const qrImage = await QRCode.toDataURL(qrString, { errorCorrectionLevel: 'M', width: 300 });\r\n    // Remove the data URL prefix and send as PNG\r\n    const img = Buffer.from(qrImage.split(\",\")[1], \"base64\");\r\n    res.writeHead(200, {\r\n      \"Content-Type\": \"image/png\",\r\n      \"Content-Length\": img.length,\r\n    });\r\n    res.end(img);\r\n  } catch (error) {\r\n    console.error(\"QR code error:\", error);\r\n    return res.status(500).json({ message: \"Internal server error\" });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a1dc1197af8396b86a3355f6be04c62999a0c71a","contentHash":"32df5822ff331072bc91b2d43b10e5e32b67ffadd70a4386ab27ffc5d2ac1f6e"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\authenticate.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\authenticate.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":23},"end":{"line":15,"column":63}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":61}},"17":{"start":{"line":17,"column":21},"end":{"line":38,"column":2}},"18":{"start":{"line":17,"column":41},"end":{"line":38,"column":2}},"19":{"start":{"line":19,"column":18},"end":{"line":19,"column":115}},"20":{"start":{"line":20,"column":4},"end":{"line":23,"column":5}},"21":{"start":{"line":21,"column":8},"end":{"line":21,"column":63}},"22":{"start":{"line":22,"column":8},"end":{"line":22,"column":22}},"23":{"start":{"line":24,"column":4},"end":{"line":37,"column":5}},"24":{"start":{"line":25,"column":24},"end":{"line":25,"column":71}},"25":{"start":{"line":26,"column":8},"end":{"line":26,"column":36}},"26":{"start":{"line":27,"column":8},"end":{"line":27,"column":32}},"27":{"start":{"line":28,"column":8},"end":{"line":28,"column":15}},"28":{"start":{"line":31,"column":8},"end":{"line":34,"column":9}},"29":{"start":{"line":32,"column":12},"end":{"line":32,"column":67}},"30":{"start":{"line":33,"column":12},"end":{"line":33,"column":26}},"31":{"start":{"line":35,"column":8},"end":{"line":35,"column":59}},"32":{"start":{"line":36,"column":8},"end":{"line":36,"column":22}},"33":{"start":{"line":39,"column":0},"end":{"line":39,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":17,"column":21},"end":{"line":17,"column":22}},"loc":{"start":{"line":17,"column":41},"end":{"line":38,"column":2}},"line":17},"9":{"name":"(anonymous_9)","decl":{"start":{"line":17,"column":75},"end":{"line":17,"column":76}},"loc":{"start":{"line":17,"column":88},"end":{"line":38,"column":1}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":16,"column":18},"end":{"line":16,"column":61}},"type":"binary-expr","locations":[{"start":{"line":16,"column":18},"end":{"line":16,"column":40}},{"start":{"line":16,"column":44},"end":{"line":16,"column":61}}],"line":16},"9":{"loc":{"start":{"line":19,"column":18},"end":{"line":19,"column":115}},"type":"cond-expr","locations":[{"start":{"line":19,"column":81},"end":{"line":19,"column":87}},{"start":{"line":19,"column":90},"end":{"line":19,"column":115}}],"line":19},"10":{"loc":{"start":{"line":19,"column":18},"end":{"line":19,"column":78}},"type":"binary-expr","locations":[{"start":{"line":19,"column":18},"end":{"line":19,"column":61}},{"start":{"line":19,"column":65},"end":{"line":19,"column":78}}],"line":19},"11":{"loc":{"start":{"line":20,"column":4},"end":{"line":23,"column":5}},"type":"if","locations":[{"start":{"line":20,"column":4},"end":{"line":23,"column":5}},{"start":{},"end":{}}],"line":20},"12":{"loc":{"start":{"line":31,"column":8},"end":{"line":34,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":34,"column":9}},{"start":{},"end":{}}],"line":31}},"s":{"0":1,"1":0,"2":0,"3":28,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":26,"11":28,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":28,"19":28,"20":28,"21":2,"22":1,"23":26,"24":26,"25":24,"26":24,"27":24,"28":2,"29":0,"30":0,"31":2,"32":1,"33":1},"f":{"0":28,"1":0,"2":0,"3":28,"4":0,"5":0,"6":26,"7":1,"8":28,"9":28},"b":{"0":[1,1,1],"1":[0,0],"2":[28,28],"3":[26,0],"4":[28,28],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[1,0],"9":[2,26],"10":[28,28],"11":[2,26],"12":[0,2]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/authenticate.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/authenticate.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AACA,gEAA+B;AAE/B,MAAM,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,iBAAiB,CAAC;AAO9D,MAAM,YAAY,GAAmB,CAAO,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;;IAC5D,MAAM,KAAK,GAAG,MAAA,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC,0CAAE,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAElE,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC,CAAC;QACvD,OAAO,IAAI,EAAE,CAAC;IAChB,CAAC;IAED,IAAI,CAAC;QACH,MAAM,OAAO,GAAG,sBAAG,CAAC,MAAM,CAAC,KAAK,EAAE,SAAS,CAG1C,CAAC;QACD,GAA4B,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;QACrD,GAA4B,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;QAClD,IAAI,EAAE,CAAC;IACT,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,IAAI,KAAK,YAAY,sBAAG,CAAC,iBAAiB,EAAE,CAAC;YAC3C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC,CAAC;YACvD,OAAO,IAAI,EAAE,CAAC;QAChB,CAAC;QACD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC,CAAC;QACnD,OAAO,IAAI,EAAE,CAAC;IAChB,CAAC;AACH,CAAC,CAAA,CAAC;AAEF,kBAAe,YAAY,CAAC","sourcesContent":["import { Request, Response, NextFunction, RequestHandler } from \"express\";\nimport jwt from \"jsonwebtoken\";\n\nconst jwtSecret = process.env.JWT_SECRET || \"your_jwt_secret\";\n\ninterface AuthenticatedRequest extends Request {\n  userId?: string;\n  role?: string;\n}\n\nconst authenticate: RequestHandler = async (req, res, next) => {\n  const token = req.header(\"Authorization\")?.replace(\"Bearer \", \"\");\n\n  if (!token) {\n    res.status(401).json({ message: \"No token provided\" });\n    return next();\n  }\n\n  try {\n    const decoded = jwt.verify(token, jwtSecret) as {\n      userId: string;\n      role: string;\n    };\n    (req as AuthenticatedRequest).userId = decoded.userId;\n    (req as AuthenticatedRequest).role = decoded.role;\n    next();\n  } catch (error) {\n    if (error instanceof jwt.TokenExpiredError) {\n      res.status(401).json({ message: \"Token has expired\" });\n      return next();\n    }\n    res.status(401).json({ message: \"Invalid token\" });\n    return next();\n  }\n};\n\nexport default authenticate;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"df12d495ebda1871dfba0b34ac95d45d457740b1","contentHash":"0194aa0d67e77db38f83cf96cc3363476fb889f58c11156dd900f32d07a3e178"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\adminRoutes.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\adminRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":26},"end":{"line":7,"column":67}},"5":{"start":{"line":8,"column":23},"end":{"line":8,"column":77}},"6":{"start":{"line":9,"column":25},"end":{"line":9,"column":81}},"7":{"start":{"line":10,"column":19},"end":{"line":10,"column":69}},"8":{"start":{"line":11,"column":25},"end":{"line":11,"column":65}},"9":{"start":{"line":12,"column":15},"end":{"line":12,"column":38}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":61}},"11":{"start":{"line":15,"column":26},"end":{"line":17,"column":1}},"12":{"start":{"line":16,"column":4},"end":{"line":16,"column":55}},"13":{"start":{"line":18,"column":25},"end":{"line":20,"column":1}},"14":{"start":{"line":19,"column":4},"end":{"line":19,"column":54}},"15":{"start":{"line":21,"column":25},"end":{"line":23,"column":1}},"16":{"start":{"line":22,"column":4},"end":{"line":22,"column":54}},"17":{"start":{"line":24,"column":27},"end":{"line":26,"column":1}},"18":{"start":{"line":25,"column":4},"end":{"line":25,"column":56}},"19":{"start":{"line":27,"column":26},"end":{"line":29,"column":1}},"20":{"start":{"line":28,"column":4},"end":{"line":28,"column":49}},"21":{"start":{"line":31,"column":0},"end":{"line":31,"column":46}},"22":{"start":{"line":32,"column":0},"end":{"line":32,"column":109}},"23":{"start":{"line":33,"column":0},"end":{"line":33,"column":52}},"24":{"start":{"line":34,"column":0},"end":{"line":34,"column":51}},"25":{"start":{"line":35,"column":0},"end":{"line":35,"column":50}},"26":{"start":{"line":36,"column":0},"end":{"line":36,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":26},"end":{"line":15,"column":27}},"loc":{"start":{"line":15,"column":46},"end":{"line":17,"column":1}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":25},"end":{"line":18,"column":26}},"loc":{"start":{"line":18,"column":45},"end":{"line":20,"column":1}},"line":18},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":25},"end":{"line":21,"column":26}},"loc":{"start":{"line":21,"column":45},"end":{"line":23,"column":1}},"line":21},"4":{"name":"(anonymous_4)","decl":{"start":{"line":24,"column":27},"end":{"line":24,"column":28}},"loc":{"start":{"line":24,"column":47},"end":{"line":26,"column":1}},"line":24},"5":{"name":"(anonymous_5)","decl":{"start":{"line":27,"column":26},"end":{"line":27,"column":27}},"loc":{"start":{"line":27,"column":40},"end":{"line":29,"column":1}},"line":27}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1},"f":{"0":3,"1":1,"2":1,"3":1,"4":1,"5":1},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/adminRoutes.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/adminRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AAEjC,oEAMwC;AACxC,8EAAsD;AACtD,kFAA0D;AAC1D,sEAA8C;AAC9C,kEAAiE;AAEjE,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,sBAAY,EAAE,wBAAc,CAAC,CAAC;AAEzC,mCAAmC;AACnC,MAAM,iBAAiB,GAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAC3D,IAAA,6BAAW,EAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AAC9B,CAAC,CAAC;AAEF,MAAM,gBAAgB,GAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAC1D,IAAA,4BAAU,EAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AAC7B,CAAC,CAAC;AAEF,MAAM,gBAAgB,GAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAC1D,IAAA,4BAAU,EAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AAC7B,CAAC,CAAC;AAEF,MAAM,kBAAkB,GAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IAC5D,IAAA,8BAAY,EAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AAC/B,CAAC,CAAC;AAEF,MAAM,iBAAiB,GAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;IACrD,IAAA,6BAAW,EAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AACxB,CAAC,CAAC;AAEF,sCAAsC;AACtC,MAAM,CAAC,GAAG,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;AAC9C,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAA,kBAAQ,EAAC,iCAAgB,CAAC,EAAE,gBAAgB,CAAC,CAAC;AAC7E,MAAM,CAAC,MAAM,CAAC,kBAAkB,EAAE,gBAAgB,CAAC,CAAC;AACpD,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,CAAC;AACnD,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,iBAAiB,CAAC,CAAC;AAElD,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport type { RequestHandler } from \"express\";\r\nimport {\r\n  getAllUsers,\r\n  updateUser,\r\n  deleteUser,\r\n  getAnalytics,\r\n  getAuditLog,\r\n} from \"../controllers/adminController\";\r\nimport authenticate from \"../middleware/authenticate\";\r\nimport authorizeAdmin from \"../middleware/authorizeAdmin\";\r\nimport validate from \"../middleware/validate\";\r\nimport { updateUserSchema } from \"../validations/userValidation\";\r\n\r\nconst router = Router();\r\n\r\nrouter.use(authenticate, authorizeAdmin);\r\n\r\n// Route handlers with void returns\r\nconst handleGetAllUsers: RequestHandler = (req, res, next) => {\r\n  getAllUsers(req, res, next);\r\n};\r\n\r\nconst handleUpdateUser: RequestHandler = (req, res, next) => {\r\n  updateUser(req, res, next);\r\n};\r\n\r\nconst handleDeleteUser: RequestHandler = (req, res, next) => {\r\n  deleteUser(req, res, next);\r\n};\r\n\r\nconst handleGetAnalytics: RequestHandler = (req, res, next) => {\r\n  getAnalytics(req, res, next);\r\n};\r\n\r\nconst handleGetAuditLog: RequestHandler = (req, res) => {\r\n  getAuditLog(req, res);\r\n};\r\n\r\n// Routes with properly typed handlers\r\nrouter.get(\"/admin/users\", handleGetAllUsers);\r\nrouter.put(\"/admin/users/:id\", validate(updateUserSchema), handleUpdateUser);\r\nrouter.delete(\"/admin/users/:id\", handleDeleteUser);\r\nrouter.get(\"/admin/analytics\", handleGetAnalytics);\r\nrouter.get(\"/admin/audit-log\", handleGetAuditLog);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"81e7da6f19a1bca7c4eba0a6493946e6d10cb865","contentHash":"ac289e19090177e046317029a2cd9f4a98b4e66c4d756495e365f88411cdb394"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\adminController.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\adminController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":135}},"14":{"start":{"line":13,"column":0},"end":{"line":13,"column":28}},"15":{"start":{"line":14,"column":17},"end":{"line":14,"column":42}},"16":{"start":{"line":15,"column":15},"end":{"line":15,"column":42}},"17":{"start":{"line":17,"column":0},"end":{"line":17,"column":22}},"18":{"start":{"line":19,"column":4},"end":{"line":26,"column":7}},"19":{"start":{"line":27,"column":4},"end":{"line":28,"column":31}},"20":{"start":{"line":28,"column":8},"end":{"line":28,"column":31}},"21":{"start":{"line":30,"column":20},"end":{"line":32,"column":2}},"22":{"start":{"line":30,"column":34},"end":{"line":32,"column":2}},"23":{"start":{"line":31,"column":4},"end":{"line":31,"column":65}},"24":{"start":{"line":33,"column":0},"end":{"line":33,"column":34}},"25":{"start":{"line":34,"column":20},"end":{"line":81,"column":2}},"26":{"start":{"line":34,"column":40},"end":{"line":81,"column":2}},"27":{"start":{"line":35,"column":4},"end":{"line":80,"column":5}},"28":{"start":{"line":36,"column":21},"end":{"line":36,"column":45}},"29":{"start":{"line":37,"column":22},"end":{"line":37,"column":47}},"30":{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},"31":{"start":{"line":39,"column":12},"end":{"line":39,"column":86}},"32":{"start":{"line":41,"column":21},"end":{"line":41,"column":39}},"33":{"start":{"line":42,"column":8},"end":{"line":76,"column":9}},"34":{"start":{"line":43,"column":40},"end":{"line":62,"column":14}},"35":{"start":{"line":63,"column":32},"end":{"line":63,"column":114}},"36":{"start":{"line":63,"column":53},"end":{"line":63,"column":112}},"37":{"start":{"line":64,"column":12},"end":{"line":72,"column":15}},"38":{"start":{"line":75,"column":12},"end":{"line":75,"column":71}},"39":{"start":{"line":79,"column":8},"end":{"line":79,"column":20}},"40":{"start":{"line":82,"column":0},"end":{"line":82,"column":34}},"41":{"start":{"line":83,"column":21},"end":{"line":131,"column":2}},"42":{"start":{"line":83,"column":41},"end":{"line":131,"column":2}},"43":{"start":{"line":84,"column":4},"end":{"line":130,"column":5}},"44":{"start":{"line":85,"column":26},"end":{"line":85,"column":89}},"45":{"start":{"line":86,"column":24},"end":{"line":86,"column":83}},"46":{"start":{"line":87,"column":8},"end":{"line":90,"column":9}},"47":{"start":{"line":88,"column":12},"end":{"line":88,"column":69}},"48":{"start":{"line":89,"column":12},"end":{"line":89,"column":19}},"49":{"start":{"line":91,"column":28},"end":{"line":96,"column":14}},"50":{"start":{"line":97,"column":8},"end":{"line":126,"column":9}},"51":{"start":{"line":98,"column":74},"end":{"line":114,"column":14}},"52":{"start":{"line":115,"column":12},"end":{"line":120,"column":15}},"53":{"start":{"line":121,"column":12},"end":{"line":121,"column":19}},"54":{"start":{"line":124,"column":12},"end":{"line":124,"column":64}},"55":{"start":{"line":125,"column":12},"end":{"line":125,"column":19}},"56":{"start":{"line":129,"column":8},"end":{"line":129,"column":20}},"57":{"start":{"line":132,"column":0},"end":{"line":132,"column":36}},"58":{"start":{"line":133,"column":19},"end":{"line":192,"column":2}},"59":{"start":{"line":133,"column":39},"end":{"line":192,"column":2}},"60":{"start":{"line":135,"column":4},"end":{"line":191,"column":5}},"61":{"start":{"line":136,"column":23},"end":{"line":136,"column":36}},"62":{"start":{"line":137,"column":8},"end":{"line":139,"column":9}},"63":{"start":{"line":138,"column":12},"end":{"line":138,"column":76}},"64":{"start":{"line":140,"column":30},"end":{"line":147,"column":9}},"65":{"start":{"line":148,"column":25},"end":{"line":148,"column":27}},"66":{"start":{"line":149,"column":29},"end":{"line":149,"column":34}},"67":{"start":{"line":150,"column":8},"end":{"line":155,"column":9}},"68":{"start":{"line":151,"column":12},"end":{"line":154,"column":13}},"69":{"start":{"line":152,"column":16},"end":{"line":152,"column":50}},"70":{"start":{"line":153,"column":16},"end":{"line":153,"column":38}},"71":{"start":{"line":156,"column":8},"end":{"line":158,"column":9}},"72":{"start":{"line":157,"column":12},"end":{"line":157,"column":82}},"73":{"start":{"line":159,"column":8},"end":{"line":165,"column":9}},"74":{"start":{"line":160,"column":25},"end":{"line":160,"column":55}},"75":{"start":{"line":161,"column":12},"end":{"line":163,"column":13}},"76":{"start":{"line":162,"column":16},"end":{"line":162,"column":80}},"77":{"start":{"line":164,"column":12},"end":{"line":164,"column":40}},"78":{"start":{"line":166,"column":8},"end":{"line":187,"column":9}},"79":{"start":{"line":167,"column":32},"end":{"line":170,"column":14}},"80":{"start":{"line":171,"column":12},"end":{"line":173,"column":13}},"81":{"start":{"line":172,"column":16},"end":{"line":172,"column":75}},"82":{"start":{"line":174,"column":12},"end":{"line":174,"column":128}},"83":{"start":{"line":175,"column":12},"end":{"line":175,"column":82}},"84":{"start":{"line":179,"column":12},"end":{"line":181,"column":13}},"85":{"start":{"line":180,"column":16},"end":{"line":180,"column":81}},"86":{"start":{"line":183,"column":12},"end":{"line":185,"column":13}},"87":{"start":{"line":184,"column":16},"end":{"line":184,"column":75}},"88":{"start":{"line":186,"column":12},"end":{"line":186,"column":71}},"89":{"start":{"line":190,"column":8},"end":{"line":190,"column":20}},"90":{"start":{"line":193,"column":0},"end":{"line":193,"column":32}},"91":{"start":{"line":194,"column":19},"end":{"line":227,"column":2}},"92":{"start":{"line":194,"column":39},"end":{"line":227,"column":2}},"93":{"start":{"line":196,"column":4},"end":{"line":226,"column":5}},"94":{"start":{"line":197,"column":23},"end":{"line":197,"column":33}},"95":{"start":{"line":198,"column":8},"end":{"line":222,"column":9}},"96":{"start":{"line":200,"column":33},"end":{"line":200,"column":80}},"97":{"start":{"line":201,"column":12},"end":{"line":204,"column":13}},"98":{"start":{"line":202,"column":16},"end":{"line":202,"column":68}},"99":{"start":{"line":203,"column":16},"end":{"line":203,"column":23}},"100":{"start":{"line":205,"column":12},"end":{"line":208,"column":13}},"101":{"start":{"line":206,"column":16},"end":{"line":206,"column":79}},"102":{"start":{"line":207,"column":16},"end":{"line":207,"column":23}},"103":{"start":{"line":210,"column":12},"end":{"line":210,"column":56}},"104":{"start":{"line":211,"column":12},"end":{"line":211,"column":114}},"105":{"start":{"line":212,"column":12},"end":{"line":212,"column":75}},"106":{"start":{"line":213,"column":12},"end":{"line":213,"column":19}},"107":{"start":{"line":216,"column":12},"end":{"line":219,"column":13}},"108":{"start":{"line":217,"column":16},"end":{"line":217,"column":68}},"109":{"start":{"line":218,"column":16},"end":{"line":218,"column":23}},"110":{"start":{"line":220,"column":12},"end":{"line":220,"column":64}},"111":{"start":{"line":221,"column":12},"end":{"line":221,"column":19}},"112":{"start":{"line":225,"column":8},"end":{"line":225,"column":20}},"113":{"start":{"line":228,"column":0},"end":{"line":228,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"logAudit","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":17}},"loc":{"start":{"line":18,"column":56},"end":{"line":29,"column":1}},"line":18},"8":{"name":"(anonymous_8)","decl":{"start":{"line":30,"column":20},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":34},"end":{"line":32,"column":2}},"line":30},"9":{"name":"(anonymous_9)","decl":{"start":{"line":30,"column":68},"end":{"line":30,"column":69}},"loc":{"start":{"line":30,"column":81},"end":{"line":32,"column":1}},"line":30},"10":{"name":"(anonymous_10)","decl":{"start":{"line":34,"column":20},"end":{"line":34,"column":21}},"loc":{"start":{"line":34,"column":40},"end":{"line":81,"column":2}},"line":34},"11":{"name":"(anonymous_11)","decl":{"start":{"line":34,"column":74},"end":{"line":34,"column":75}},"loc":{"start":{"line":34,"column":87},"end":{"line":81,"column":1}},"line":34},"12":{"name":"(anonymous_12)","decl":{"start":{"line":63,"column":42},"end":{"line":63,"column":43}},"loc":{"start":{"line":63,"column":53},"end":{"line":63,"column":112}},"line":63},"13":{"name":"(anonymous_13)","decl":{"start":{"line":83,"column":21},"end":{"line":83,"column":22}},"loc":{"start":{"line":83,"column":41},"end":{"line":131,"column":2}},"line":83},"14":{"name":"(anonymous_14)","decl":{"start":{"line":83,"column":75},"end":{"line":83,"column":76}},"loc":{"start":{"line":83,"column":88},"end":{"line":131,"column":1}},"line":83},"15":{"name":"(anonymous_15)","decl":{"start":{"line":133,"column":19},"end":{"line":133,"column":20}},"loc":{"start":{"line":133,"column":39},"end":{"line":192,"column":2}},"line":133},"16":{"name":"(anonymous_16)","decl":{"start":{"line":133,"column":73},"end":{"line":133,"column":74}},"loc":{"start":{"line":133,"column":86},"end":{"line":192,"column":1}},"line":133},"17":{"name":"(anonymous_17)","decl":{"start":{"line":194,"column":19},"end":{"line":194,"column":20}},"loc":{"start":{"line":194,"column":39},"end":{"line":227,"column":2}},"line":194},"18":{"name":"(anonymous_18)","decl":{"start":{"line":194,"column":73},"end":{"line":194,"column":74}},"loc":{"start":{"line":194,"column":86},"end":{"line":227,"column":1}},"line":194}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":27,"column":4},"end":{"line":28,"column":31}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":28,"column":31}},{"start":{},"end":{}}],"line":27},"6":{"loc":{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},"type":"if","locations":[{"start":{"line":38,"column":8},"end":{"line":40,"column":9}},{"start":{},"end":{}}],"line":38},"7":{"loc":{"start":{"line":38,"column":12},"end":{"line":38,"column":64}},"type":"binary-expr","locations":[{"start":{"line":38,"column":12},"end":{"line":38,"column":23}},{"start":{"line":38,"column":27},"end":{"line":38,"column":39}},{"start":{"line":38,"column":43},"end":{"line":38,"column":51}},{"start":{"line":38,"column":55},"end":{"line":38,"column":64}}],"line":38},"8":{"loc":{"start":{"line":85,"column":26},"end":{"line":85,"column":89}},"type":"cond-expr","locations":[{"start":{"line":85,"column":48},"end":{"line":85,"column":77}},{"start":{"line":85,"column":80},"end":{"line":85,"column":89}}],"line":85},"9":{"loc":{"start":{"line":86,"column":24},"end":{"line":86,"column":83}},"type":"cond-expr","locations":[{"start":{"line":86,"column":44},"end":{"line":86,"column":71}},{"start":{"line":86,"column":74},"end":{"line":86,"column":83}}],"line":86},"10":{"loc":{"start":{"line":87,"column":8},"end":{"line":90,"column":9}},"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":90,"column":9}},{"start":{},"end":{}}],"line":87},"11":{"loc":{"start":{"line":87,"column":12},"end":{"line":87,"column":94}},"type":"binary-expr","locations":[{"start":{"line":87,"column":13},"end":{"line":87,"column":22}},{"start":{"line":87,"column":26},"end":{"line":87,"column":52}},{"start":{"line":87,"column":58},"end":{"line":87,"column":65}},{"start":{"line":87,"column":69},"end":{"line":87,"column":93}}],"line":87},"12":{"loc":{"start":{"line":91,"column":28},"end":{"line":96,"column":14}},"type":"cond-expr","locations":[{"start":{"line":91,"column":51},"end":{"line":96,"column":9}},{"start":{"line":96,"column":12},"end":{"line":96,"column":14}}],"line":91},"13":{"loc":{"start":{"line":91,"column":28},"end":{"line":91,"column":48}},"type":"binary-expr","locations":[{"start":{"line":91,"column":28},"end":{"line":91,"column":37}},{"start":{"line":91,"column":41},"end":{"line":91,"column":48}}],"line":91},"14":{"loc":{"start":{"line":137,"column":8},"end":{"line":139,"column":9}},"type":"if","locations":[{"start":{"line":137,"column":8},"end":{"line":139,"column":9}},{"start":{},"end":{}}],"line":137},"15":{"loc":{"start":{"line":151,"column":12},"end":{"line":154,"column":13}},"type":"if","locations":[{"start":{"line":151,"column":12},"end":{"line":154,"column":13}},{"start":{},"end":{}}],"line":151},"16":{"loc":{"start":{"line":156,"column":8},"end":{"line":158,"column":9}},"type":"if","locations":[{"start":{"line":156,"column":8},"end":{"line":158,"column":9}},{"start":{},"end":{}}],"line":156},"17":{"loc":{"start":{"line":159,"column":8},"end":{"line":165,"column":9}},"type":"if","locations":[{"start":{"line":159,"column":8},"end":{"line":165,"column":9}},{"start":{},"end":{}}],"line":159},"18":{"loc":{"start":{"line":161,"column":12},"end":{"line":163,"column":13}},"type":"if","locations":[{"start":{"line":161,"column":12},"end":{"line":163,"column":13}},{"start":{},"end":{}}],"line":161},"19":{"loc":{"start":{"line":171,"column":12},"end":{"line":173,"column":13}},"type":"if","locations":[{"start":{"line":171,"column":12},"end":{"line":173,"column":13}},{"start":{},"end":{}}],"line":171},"20":{"loc":{"start":{"line":174,"column":35},"end":{"line":174,"column":108}},"type":"binary-expr","locations":[{"start":{"line":174,"column":36},"end":{"line":174,"column":94}},{"start":{"line":174,"column":99},"end":{"line":174,"column":108}}],"line":174},"21":{"loc":{"start":{"line":174,"column":36},"end":{"line":174,"column":94}},"type":"cond-expr","locations":[{"start":{"line":174,"column":80},"end":{"line":174,"column":86}},{"start":{"line":174,"column":89},"end":{"line":174,"column":94}}],"line":174},"22":{"loc":{"start":{"line":174,"column":36},"end":{"line":174,"column":77}},"type":"binary-expr","locations":[{"start":{"line":174,"column":36},"end":{"line":174,"column":60}},{"start":{"line":174,"column":64},"end":{"line":174,"column":77}}],"line":174},"23":{"loc":{"start":{"line":179,"column":12},"end":{"line":181,"column":13}},"type":"if","locations":[{"start":{"line":179,"column":12},"end":{"line":181,"column":13}},{"start":{},"end":{}}],"line":179},"24":{"loc":{"start":{"line":183,"column":12},"end":{"line":185,"column":13}},"type":"if","locations":[{"start":{"line":183,"column":12},"end":{"line":185,"column":13}},{"start":{},"end":{}}],"line":183},"25":{"loc":{"start":{"line":201,"column":12},"end":{"line":204,"column":13}},"type":"if","locations":[{"start":{"line":201,"column":12},"end":{"line":204,"column":13}},{"start":{},"end":{}}],"line":201},"26":{"loc":{"start":{"line":205,"column":12},"end":{"line":208,"column":13}},"type":"if","locations":[{"start":{"line":205,"column":12},"end":{"line":208,"column":13}},{"start":{},"end":{}}],"line":205},"27":{"loc":{"start":{"line":211,"column":35},"end":{"line":211,"column":108}},"type":"binary-expr","locations":[{"start":{"line":211,"column":36},"end":{"line":211,"column":94}},{"start":{"line":211,"column":99},"end":{"line":211,"column":108}}],"line":211},"28":{"loc":{"start":{"line":211,"column":36},"end":{"line":211,"column":94}},"type":"cond-expr","locations":[{"start":{"line":211,"column":80},"end":{"line":211,"column":86}},{"start":{"line":211,"column":89},"end":{"line":211,"column":94}}],"line":211},"29":{"loc":{"start":{"line":211,"column":36},"end":{"line":211,"column":77}},"type":"binary-expr","locations":[{"start":{"line":211,"column":36},"end":{"line":211,"column":60}},{"start":{"line":211,"column":64},"end":{"line":211,"column":77}}],"line":211},"30":{"loc":{"start":{"line":216,"column":12},"end":{"line":219,"column":13}},"type":"if","locations":[{"start":{"line":216,"column":12},"end":{"line":219,"column":13}},{"start":{},"end":{}}],"line":216}},"s":{"0":4,"1":9,"2":4,"3":21,"4":7,"5":7,"6":0,"7":2,"8":2,"9":0,"10":30,"11":21,"12":4,"13":4,"14":4,"15":4,"16":4,"17":4,"18":111,"19":111,"20":11,"21":4,"22":1,"23":1,"24":4,"25":4,"26":7,"27":7,"28":7,"29":6,"30":6,"31":5,"32":1,"33":1,"34":1,"35":1,"36":0,"37":1,"38":0,"39":1,"40":4,"41":4,"42":6,"43":6,"44":6,"45":5,"46":5,"47":2,"48":2,"49":3,"50":3,"51":3,"52":3,"53":3,"54":0,"55":0,"56":1,"57":4,"58":4,"59":5,"60":5,"61":5,"62":5,"63":0,"64":5,"65":5,"66":5,"67":5,"68":30,"69":5,"70":5,"71":5,"72":2,"73":3,"74":0,"75":0,"76":0,"77":0,"78":3,"79":3,"80":1,"81":0,"82":1,"83":1,"84":2,"85":0,"86":2,"87":2,"88":0,"89":0,"90":4,"91":4,"92":2,"93":2,"94":2,"95":2,"96":2,"97":2,"98":0,"99":0,"100":2,"101":1,"102":1,"103":1,"104":0,"105":0,"106":0,"107":1,"108":0,"109":0,"110":1,"111":1,"112":0,"113":4},"f":{"0":21,"1":9,"2":4,"3":21,"4":7,"5":2,"6":30,"7":111,"8":1,"9":1,"10":7,"11":7,"12":0,"13":6,"14":6,"15":5,"16":5,"17":2,"18":2},"b":{"0":[4,4,4],"1":[5,4],"2":[21,21],"3":[21,9],"4":[21,21],"5":[11,100],"6":[5,1],"7":[6,2,2,1],"8":[3,2],"9":[3,2],"10":[2,3],"11":[5,3,3,1],"12":[1,2],"13":[3,1],"14":[0,5],"15":[5,25],"16":[2,3],"17":[0,3],"18":[0,0],"19":[0,1],"20":[1,1],"21":[1,0],"22":[1,1],"23":[0,2],"24":[2,0],"25":[0,2],"26":[1,1],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/adminController.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/adminController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response, RequestHandler, NextFunction } from \"express\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\nimport { Role, UserResponse, UsersListResponse, MessageResponse } from \"../types\";\r\n\r\n// Extend Express Request interface to include 'user'\r\ndeclare global {\r\n  namespace Express {\r\n    interface User {\r\n      id: string;\r\n      [key: string]: any;\r\n    }\r\n    interface Request {\r\n      user?: User;\r\n    }\r\n  }\r\n}\r\n\r\nconst prisma = new PrismaClient();\r\n\r\n// In-memory audit log (for demo; use DB in production)\r\nexport const auditLog: Array<{\r\n  id: number;\r\n  action: string;\r\n  userId?: string;\r\n  performedBy: string;\r\n  timestamp: string;\r\n  details?: any;\r\n}> = [];\r\n\r\nexport function logAudit(\r\n  action: string,\r\n  performedBy: string,\r\n  userId?: string,\r\n  details?: any,\r\n) {\r\n  auditLog.unshift({\r\n    id: Date.now() + Math.random(),\r\n    action,\r\n    userId,\r\n    performedBy,\r\n    timestamp: new Date().toISOString(),\r\n    details,\r\n  });\r\n  if (auditLog.length > 100) auditLog.pop();\r\n}\r\n\r\nexport const getAuditLog = async (req: Request, res: Response) => {\r\n  res.status(200).json({ log: auditLog.slice(0, 50) });\r\n};\r\n\r\nexport const getAllUsers = async (\r\n  req: Request,\r\n  res: Response<UsersListResponse | MessageResponse>,\r\n  next: NextFunction\r\n): Promise<Response<UsersListResponse | MessageResponse> | void> => {\r\n  try {\r\n    const page = parseInt(req.query.page as string);\r\n    const limit = parseInt(req.query.limit as string);\r\n\r\n    if (isNaN(page) || isNaN(limit) || page < 1 || limit < 1) {\r\n      return res.status(500).json({ message: \"Invalid pagination parameters\" });\r\n    }\r\n\r\n    const skip = (page - 1) * limit;\r\n\r\n    try {\r\n      const [users, totalCount] = await Promise.all([\r\n        prisma.user.findMany({\r\n          skip,\r\n          take: limit,\r\n          select: {\r\n            id: true,\r\n            firstName: true,\r\n            lastName: true,\r\n            email: true,\r\n            registrationNumber: true,\r\n            dateOfBirth: true,\r\n            role: true,\r\n            createdAt: true,\r\n            password: true,\r\n            updatedAt: true,\r\n          },\r\n          orderBy: { createdAt: \"desc\" },\r\n        }),\r\n        prisma.user.count(),\r\n      ]);\r\n\r\n      const mappedUsers = users.map((user) => ({\r\n        ...user,\r\n        role: user.role as Role,\r\n      }));\r\n\r\n      return res.status(200).json({\r\n        users: mappedUsers,\r\n        pagination: {\r\n          total: totalCount,\r\n          page,\r\n          limit,\r\n          totalPages: Math.ceil(totalCount / limit),\r\n        },\r\n      });\r\n    } catch (dbError) {\r\n      return res.status(500).json({ message: \"Database error\" });\r\n    }\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n\r\nexport const getAnalytics = async (\r\n  req: Request,\r\n  res: Response,\r\n  next: NextFunction\r\n): Promise<void> => {\r\n  try {\r\n    const startDate = req.query.startDate ? new Date(req.query.startDate as string) : undefined;\r\n    const endDate = req.query.endDate ? new Date(req.query.endDate as string) : undefined;\r\n\r\n    if ((startDate && isNaN(startDate.getTime())) || (endDate && isNaN(endDate.getTime()))) {\r\n      res.status(400).json({ message: \"Invalid date format\" });\r\n      return;\r\n    }\r\n\r\n    const whereClause = startDate && endDate ? {\r\n      createdAt: {\r\n        gte: startDate,\r\n        lte: endDate\r\n      }\r\n    } : {};\r\n\r\n    try {\r\n      const [totalUsers, totalAdmins, totalStudents, recentUsers] =\r\n        await Promise.all([\r\n          prisma.user.count({ where: whereClause }),\r\n          prisma.user.count({ where: { ...whereClause, role: \"admin\" } }),\r\n          prisma.user.count({ where: { ...whereClause, role: \"student\" } }),\r\n          prisma.user.findMany({\r\n            where: whereClause,\r\n            orderBy: { createdAt: \"desc\" },\r\n            take: 5,\r\n            select: {\r\n              id: true,\r\n              firstName: true,\r\n              lastName: true,\r\n              email: true,\r\n              createdAt: true,\r\n            },\r\n          }),\r\n        ]);\r\n\r\n      res.status(200).json({\r\n        totalUsers,\r\n        totalAdmins,\r\n        totalStudents,\r\n        recentUsers,\r\n      });\r\n      return;\r\n    } catch (dbError) {\r\n      res.status(500).json({ message: \"Database error\" });\r\n      return;\r\n    }\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n\r\nexport const updateUser = async (\r\n  req: Request,\r\n  res: Response<MessageResponse>,\r\n  next: NextFunction,\r\n): Promise<Response<MessageResponse> | void> => {\r\n  try {\r\n    const userId = req.params.id;\r\n    if (!userId) {\r\n      return res.status(400).json({ message: \"User ID is required\" });\r\n    }\r\n\r\n    const allowedFields = [\r\n      'firstName',\r\n      'lastName',\r\n      'email',\r\n      'dateOfBirth',\r\n      'registrationNumber',\r\n      'role',\r\n    ];\r\n    const userData: any = {};\r\n    let hasValidFields = false;\r\n    \r\n    for (const field of allowedFields) {\r\n      if (req.body[field] !== undefined) {\r\n        userData[field] = req.body[field];\r\n        hasValidFields = true;\r\n      }\r\n    }\r\n\r\n    if (!hasValidFields) {\r\n      return res.status(400).json({ message: \"No valid fields to update\" });\r\n    }\r\n\r\n    if (userData.dateOfBirth) {\r\n      const date = new Date(userData.dateOfBirth);\r\n      if (isNaN(date.getTime())) {\r\n        return res.status(400).json({ message: \"Invalid date format\" });\r\n      }\r\n      userData.dateOfBirth = date;\r\n    }\r\n\r\n    try {\r\n      const updatedUser = await prisma.user.update({\r\n        where: { id: userId },\r\n        data: userData,\r\n      });\r\n      \r\n      if (!updatedUser) {\r\n        return res.status(404).json({ message: \"User not found\" });\r\n      }\r\n\r\n      logAudit(\"updateUser\", req.user?.id || \"unknown\", userId, userData);\r\n      return res.status(200).json({ message: \"User updated successfully\" });\r\n    } catch (dbError: any) {\r\n      // Handle Prisma unique constraint violation\r\n      if (dbError.code === 'P2002') {\r\n        return res.status(400).json({ message: \"Email already in use\" });\r\n      }\r\n      // Handle record not found\r\n      if (dbError.code === 'P2025') {\r\n        return res.status(404).json({ message: \"User not found\" });\r\n      }\r\n      return res.status(500).json({ message: \"Database error\" });\r\n    }\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n\r\nexport const deleteUser = async (\r\n  req: Request,\r\n  res: Response<MessageResponse>,\r\n  next: NextFunction,\r\n): Promise<void> => {\r\n  try {\r\n    const { id } = req.params;\r\n\r\n    try {\r\n      // Check if user exists\r\n      const existingUser = await prisma.user.findUnique({ where: { id } });\r\n      if (!existingUser) {\r\n        res.status(404).json({ message: \"User not found\" });\r\n        return;\r\n      }\r\n\r\n      if (existingUser.role === \"admin\") {\r\n        res.status(403).json({ message: \"Cannot delete admin users\" });\r\n        return;\r\n      }\r\n\r\n      // Delete user from the database\r\n      await prisma.user.delete({ where: { id } });\r\n      logAudit(\"deleteUser\", req.user?.id || \"unknown\", id);\r\n      res.status(200).json({ message: \"User deleted successfully\" });\r\n      return;\r\n    } catch (dbError: any) {\r\n      if (dbError.code === 'P2025') {\r\n        res.status(404).json({ message: \"User not found\" });\r\n        return;\r\n      }\r\n      res.status(500).json({ message: \"Database error\" });\r\n      return;\r\n    }\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cdb53eefd1d359196e91db34de7abd04904b5a6a","contentHash":"b3121481a828795470b510f1694cd007e4b82553eaac4d09a1497faab325a9e9"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\authorizeAdmin.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\authorizeAdmin.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":23},"end":{"line":9,"column":1}},"2":{"start":{"line":4,"column":4},"end":{"line":7,"column":5}},"3":{"start":{"line":5,"column":8},"end":{"line":5,"column":67}},"4":{"start":{"line":6,"column":8},"end":{"line":6,"column":15}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":11}},"6":{"start":{"line":10,"column":0},"end":{"line":10,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":23},"end":{"line":3,"column":24}},"loc":{"start":{"line":3,"column":43},"end":{"line":9,"column":1}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":4,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":7,"column":5}},{"start":{},"end":{}}],"line":4}},"s":{"0":1,"1":1,"2":6,"3":1,"4":1,"5":5,"6":1},"f":{"0":6},"b":{"0":[1,5]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/authorizeAdmin.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/authorizeAdmin.ts"],"names":[],"mappings":";;AAMA,MAAM,cAAc,GAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IACxD,IAAK,GAA4B,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;QACnD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,uBAAuB,EAAE,CAAC,CAAC;QAC3D,OAAO;IACT,CAAC;IACD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;AAEF,kBAAe,cAAc,CAAC","sourcesContent":["import { Request, Response, NextFunction, RequestHandler } from \"express\";\n\ninterface AuthenticatedRequest extends Request {\n  role?: string;\n}\n\nconst authorizeAdmin: RequestHandler = (req, res, next) => {\n  if ((req as AuthenticatedRequest).role !== \"admin\") {\n    res.status(403).json({ message: \"Admin access required\" });\n    return;\n  }\n  next();\n};\n\nexport default authorizeAdmin;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0d57a82c76516144354d85cb69dcfdd00e0c3ad7","contentHash":"4cd874cef09fb19fca48aedafeb94243be8ebc15cd8e27660b0276077c630484"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\validations\\userValidation.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\validations\\userValidation.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":0},"end":{"line":19,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/validations/userValidation.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/validations/userValidation.ts"],"names":[],"mappings":";;;AAAA,6BAAwB;AAEX,QAAA,gBAAgB,GAAG,OAAC,CAAC,MAAM,CAAC;IACvC,SAAS,EAAE,OAAC;SACT,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,EAAE,0CAA0C,CAAC;SAClD,QAAQ,EAAE;IACb,QAAQ,EAAE,OAAC;SACR,MAAM,EAAE;SACR,GAAG,CAAC,CAAC,EAAE,yCAAyC,CAAC;SACjD,QAAQ,EAAE;IACb,KAAK,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE;IAC3D,WAAW,EAAE,OAAC;SACX,MAAM,EAAE;SACR,KAAK,CAAC,qBAAqB,EAAE,kCAAkC,CAAC;SAChE,QAAQ,EAAE;CACd,CAAC,CAAC","sourcesContent":["import { z } from \"zod\";\n\nexport const updateUserSchema = z.object({\n  firstName: z\n    .string()\n    .min(2, \"First name must be at least 2 characters\")\n    .optional(),\n  lastName: z\n    .string()\n    .min(2, \"Last name must be at least 2 characters\")\n    .optional(),\n  email: z.string().email(\"Invalid email address\").optional(),\n  dateOfBirth: z\n    .string()\n    .regex(/^\\d{4}-\\d{2}-\\d{2}$/, \"Invalid date format (YYYY-MM-DD)\")\n    .optional(),\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d29c3343380772e7363be5dba15f35c272c8ae37","contentHash":"a3ef0a10ae4cf6a31bcc227d6769fbbcd5e201084cf260099acf1366dfba1e41"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\docs\\swagger.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\docs\\swagger.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"4":{"start":{"line":7,"column":29},"end":{"line":7,"column":75}},"5":{"start":{"line":8,"column":22},"end":{"line":8,"column":52}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":124}},"7":{"start":{"line":11,"column":4},"end":{"line":14,"column":7}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":58}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":44}},"10":{"start":{"line":15,"column":4},"end":{"line":15,"column":71}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"swaggerDocs","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":20}},"loc":{"start":{"line":9,"column":32},"end":{"line":16,"column":1}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":30},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":44},"end":{"line":14,"column":5}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":11,"7":11,"8":1,"9":1,"10":11},"f":{"0":1,"1":11,"2":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/docs/swagger.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/docs/swagger.ts"],"names":[],"mappings":";;;;;AAIA,8BAUC;AAdD,4EAA2C;AAE3C,qDAAkD;AAElD,SAAwB,WAAW,CAAC,GAAY,EAAE,IAAY;IAE5D,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,4BAAS,CAAC,KAAK,EAAE,4BAAS,CAAC,KAAK,CAAC,yBAAW,CAAC,CAAC,CAAC;IAEpE,GAAG,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;QACrC,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;QAClD,GAAG,CAAC,IAAI,CAAC,yBAAW,CAAC,CAAC;IACxB,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,GAAG,CAAC,sCAAsC,IAAI,WAAW,CAAC,CAAC;AACrE,CAAC","sourcesContent":["import swaggerUi from \"swagger-ui-express\";\nimport { Express } from \"express\";\nimport { openApiSpec } from \"../docs/swaggerDocs\";\n\nexport default function swaggerDocs(app: Express, port: number) {\n\n  app.use(\"/api-docs\", swaggerUi.serve, swaggerUi.setup(openApiSpec));\n\n  app.get(\"/api-docs.json\", (req, res) => {\n    res.setHeader(\"Content-Type\", \"application/json\");\n    res.send(openApiSpec);\n  });\n\n  console.log(`Docs available at http://localhost:${port}/api-docs`);\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"df360fdb224b04e7d25a82a44337599fb782e4af","contentHash":"e7176ae67d1a9d3f19b33ddeb82a2a288643a43e991066015a1a638cc0444ab7"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\docs\\swaggerDocs.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\docs\\swaggerDocs.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":484,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/docs/swaggerDocs.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/docs/swaggerDocs.ts"],"names":[],"mappings":"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","sourcesContent":["export const openApiSpec = {\r\n  openapi: \"3.0.0\",\r\n  info: {\r\n    title: \"Student Registration API\",\r\n    version: \"1.0.0\",\r\n    description: \"API for student registration system\",\r\n  },\r\n  components: {\r\n    securitySchemes: {\r\n      bearerAuth: {\r\n        type: \"http\",\r\n        scheme: \"bearer\",\r\n        bearerFormat: \"JWT\",\r\n      },\r\n    },\r\n    schemas: {\r\n      RegisterUser: {\r\n        type: \"object\",\r\n        properties: {\r\n          firstName: { type: \"string\" },\r\n          lastName: { type: \"string\" },\r\n          email: { type: \"string\", format: \"email\" },\r\n          password: { type: \"string\" },\r\n          dateOfBirth: { type: \"string\", format: \"date\" },\r\n        },\r\n        required: [\"firstName\", \"lastName\", \"email\", \"password\", \"dateOfBirth\"],\r\n      },\r\n      LoginUser: {\r\n        type: \"object\",\r\n        properties: {\r\n          email: { type: \"string\", format: \"email\" },\r\n          password: { type: \"string\" },\r\n        },\r\n        required: [\"email\", \"password\"],\r\n      },\r\n      UpdateUser: {\r\n        type: \"object\",\r\n        properties: {\r\n          firstName: { type: \"string\" },\r\n          lastName: { type: \"string\" },\r\n          email: { type: \"string\", format: \"email\" },\r\n          registrationNumber: { type: \"string\" },\r\n        },\r\n      },\r\n      User: {\r\n        type: \"object\",\r\n        properties: {\r\n          id: { type: \"string\" },\r\n          firstName: { type: \"string\" },\r\n          lastName: { type: \"string\" },\r\n          email: { type: \"string\", format: \"email\" },\r\n          registrationNumber: { type: \"string\" },\r\n          dateOfBirth: { type: \"string\", format: \"date\" },\r\n          role: { type: \"string\" },\r\n          createdAt: { type: \"string\", format: \"date-time\" },\r\n          updatedAt: { type: \"string\", format: \"date-time\" },\r\n        },\r\n      },\r\n      MessageResponse: {\r\n        type: \"object\",\r\n        properties: {\r\n          message: { type: \"string\" },\r\n        },\r\n      },\r\n      ErrorResponse: {\r\n        type: \"object\",\r\n        properties: {\r\n          message: { type: \"string\" },\r\n          errors: { type: \"array\", items: { type: \"object\" } },\r\n        },\r\n      },\r\n    },\r\n  },\r\n  security: [{ bearerAuth: [] }],\r\n  paths: {\r\n    \"/api/register\": {\r\n      post: {\r\n        summary: \"Register a new student\",\r\n        tags: [\"Auth\"],\r\n        requestBody: {\r\n          required: true,\r\n          content: {\r\n            \"application/json\": {\r\n              schema: { $ref: \"#/components/schemas/RegisterUser\" },\r\n            },\r\n          },\r\n        },\r\n        responses: {\r\n          201: {\r\n            description: \"Student registered successfully\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/User\" },\r\n              },\r\n            },\r\n          },\r\n          400: {\r\n            description: \"Bad request\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    \"/api/login\": {\r\n      post: {\r\n        summary: \"Login a user\",\r\n        tags: [\"Auth\"],\r\n        requestBody: {\r\n          required: true,\r\n          content: {\r\n            \"application/json\": {\r\n              schema: { $ref: \"#/components/schemas/LoginUser\" },\r\n            },\r\n          },\r\n        },\r\n        responses: {\r\n          200: {\r\n            description: \"Login successful\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/User\" },\r\n              },\r\n            },\r\n          },\r\n          400: {\r\n            description: \"Bad request\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          401: {\r\n            description: \"Invalid credentials\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    \"/api/profile\": {\r\n      get: {\r\n        summary: \"Get the authenticated user's profile\",\r\n        tags: [\"User\"],\r\n        security: [{ bearerAuth: [] }],\r\n        responses: {\r\n          200: {\r\n            description: \"User profile data\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/User\" },\r\n              },\r\n            },\r\n          },\r\n          401: {\r\n            description: \"Unauthorized\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    \"/api/user/{id}/qrcode\": {\r\n      get: {\r\n        summary: \"Get a QR code for a user's name, email, and registration number\",\r\n        tags: [\"User\"],\r\n        security: [{ bearerAuth: [] }],\r\n        parameters: [\r\n          {\r\n            in: \"path\",\r\n            name: \"id\",\r\n            required: true,\r\n            schema: { type: \"string\" },\r\n            description: \"User ID\",\r\n          },\r\n        ],\r\n        responses: {\r\n          200: {\r\n            description: \"QR code image\",\r\n            content: {\r\n              \"image/png\": {\r\n                schema: { type: \"string\", format: \"binary\" },\r\n              },\r\n            },\r\n          },\r\n          401: {\r\n            description: \"Unauthorized\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          403: {\r\n            description: \"Forbidden (not self or admin)\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          404: {\r\n            description: \"User not found\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    \"/api/admin/users\": {\r\n      get: {\r\n        summary: \"Get all users (admin only)\",\r\n        tags: [\"Admin\"],\r\n        security: [{ bearerAuth: [] }],\r\n        parameters: [\r\n          { in: \"query\", name: \"page\", schema: { type: \"integer\" }, description: \"Page number\" },\r\n          { in: \"query\", name: \"limit\", schema: { type: \"integer\" }, description: \"Number of users per page\" },\r\n        ],\r\n        responses: {\r\n          200: {\r\n            description: \"List of users\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { type: \"array\", items: { $ref: \"#/components/schemas/User\" } },\r\n              },\r\n            },\r\n          },\r\n          401: {\r\n            description: \"Unauthorized\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          403: {\r\n            description: \"Admin access required\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    \"/api/admin/users/{id}\": {\r\n      put: {\r\n        summary: \"Update a user (admin only)\",\r\n        tags: [\"Admin\"],\r\n        security: [{ bearerAuth: [] }],\r\n        parameters: [\r\n          { in: \"path\", name: \"id\", required: true, schema: { type: \"string\" }, description: \"User ID\" },\r\n        ],\r\n        requestBody: {\r\n          required: true,\r\n          content: {\r\n            \"application/json\": {\r\n              schema: { $ref: \"#/components/schemas/UpdateUser\" },\r\n            },\r\n          },\r\n        },\r\n        responses: {\r\n          200: {\r\n            description: \"User updated successfully\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/User\" },\r\n              },\r\n            },\r\n          },\r\n          400: {\r\n            description: \"Bad request\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          401: {\r\n            description: \"Unauthorized\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          403: {\r\n            description: \"Admin access required\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n      delete: {\r\n        summary: \"Delete a user (admin only)\",\r\n        tags: [\"Admin\"],\r\n        security: [{ bearerAuth: [] }],\r\n        parameters: [\r\n          { in: \"path\", name: \"id\", required: true, schema: { type: \"string\" }, description: \"User ID\" },\r\n        ],\r\n        responses: {\r\n          200: {\r\n            description: \"User deleted successfully\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/MessageResponse\" },\r\n              },\r\n            },\r\n          },\r\n          401: {\r\n            description: \"Unauthorized\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          403: {\r\n            description: \"Admin access required\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    \"/api/admin/analytics\": {\r\n      get: {\r\n        summary: \"Get user analytics (admin only)\",\r\n        tags: [\"Admin\"],\r\n        security: [{ bearerAuth: [] }],\r\n        responses: {\r\n          200: {\r\n            description: \"User analytics data\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { type: \"object\" },\r\n              },\r\n            },\r\n          },\r\n          401: {\r\n            description: \"Unauthorized\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          403: {\r\n            description: \"Admin access required\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    \"/api/users/{id}\": {\r\n      get: {\r\n        summary: \"Get user by ID (admin or self)\",\r\n        tags: [\"User\"],\r\n        security: [{ bearerAuth: [] }],\r\n        parameters: [\r\n          {\r\n            in: \"path\",\r\n            name: \"id\",\r\n            required: true,\r\n            schema: { type: \"string\" },\r\n            description: \"User ID\",\r\n          },\r\n        ],\r\n        responses: {\r\n          200: {\r\n            description: \"User data\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/User\" },\r\n              },\r\n            },\r\n          },\r\n          401: {\r\n            description: \"Unauthorized\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          403: {\r\n            description: \"Forbidden (not self or admin)\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          404: {\r\n            description: \"User not found\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    \"/api/admin/audit-log\": {\r\n      get: {\r\n        summary: \"Get admin audit log (admin only)\",\r\n        tags: [\"Admin\"],\r\n        security: [{ bearerAuth: [] }],\r\n        responses: {\r\n          200: {\r\n            description: \"Audit log data\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { type: \"object\" },\r\n              },\r\n            },\r\n          },\r\n          401: {\r\n            description: \"Unauthorized\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n          403: {\r\n            description: \"Admin access required\",\r\n            content: {\r\n              \"application/json\": {\r\n                schema: { $ref: \"#/components/schemas/ErrorResponse\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    \"/api/test\": {\r\n      get: {\r\n        summary: \"Test route (health check)\",\r\n        tags: [\"Misc\"],\r\n        responses: {\r\n          200: { description: \"Test route is working\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/\": {\r\n      get: {\r\n        summary: \"Root route (health check)\",\r\n        tags: [\"Misc\"],\r\n        responses: {\r\n          200: { description: \"Server is running\" },\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"722df2be984e43640f58fb1e1fd59f9de9e00c8a","contentHash":"e8891701bdc61b69e9a5f0e7b482d56fd2b633deb5c6ce5e22fe627d990bab41"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\utils\\logTestResult.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\utils\\logTestResult.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":38}},"14":{"start":{"line":13,"column":17},"end":{"line":13,"column":42}},"15":{"start":{"line":14,"column":15},"end":{"line":14,"column":42}},"16":{"start":{"line":16,"column":4},"end":{"line":24,"column":7}},"17":{"start":{"line":17,"column":8},"end":{"line":23,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"logTestResult","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":22}},"loc":{"start":{"line":15,"column":48},"end":{"line":25,"column":1}},"line":15},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":43},"end":{"line":16,"column":44}},"loc":{"start":{"line":16,"column":56},"end":{"line":24,"column":5}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":21,"column":23},"end":{"line":21,"column":36}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":28}},{"start":{"line":21,"column":32},"end":{"line":21,"column":36}}],"line":21}},"s":{"0":1,"1":9,"2":9,"3":9,"4":9,"5":9,"6":0,"7":0,"8":0,"9":0,"10":18,"11":9,"12":1,"13":1,"14":1,"15":1,"16":9,"17":9},"f":{"0":9,"1":9,"2":9,"3":9,"4":9,"5":0,"6":18,"7":9,"8":9},"b":{"0":[1,1,1],"1":[0,9],"2":[9,9],"3":[9,9],"4":[9,9],"5":[9,7]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/utils/logTestResult.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/utils/logTestResult.ts"],"names":[],"mappings":";;;;;;;;;;;AAIA,sCAQC;AAZD,2CAA8C;AAE9C,MAAM,MAAM,GAAG,IAAI,qBAAY,EAAE,CAAC;AAElC,SAAsB,aAAa,CAAC,QAAgB,EAAE,MAAc,EAAE,KAAc;;QAClF,MAAM,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC;YAC7B,IAAI,EAAE;gBACJ,QAAQ;gBACR,MAAM;gBACN,KAAK,EAAE,KAAK,IAAI,IAAI;aACrB;SACF,CAAC,CAAC;IACL,CAAC;CAAA","sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nexport async function logTestResult(testName: string, status: string, error?: string) {\r\n  await prisma.testResult.create({\r\n    data: {\r\n      testName,\r\n      status,\r\n      error: error || null,\r\n    },\r\n  });\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3fffb9993dbe6615824c1adec1a73b28cd5442fd","contentHash":"dda1b9c7376ee6fc1889887409db8ccfed79728fbbcadae396c713ebadc12e24"}}