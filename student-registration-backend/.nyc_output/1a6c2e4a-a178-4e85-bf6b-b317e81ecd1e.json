{"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\server.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\server.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":21}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":53}},"17":{"start":{"line":17,"column":15},"end":{"line":17,"column":47}},"18":{"start":{"line":18,"column":17},"end":{"line":18,"column":42}},"19":{"start":{"line":19,"column":21},"end":{"line":19,"column":68}},"20":{"start":{"line":20,"column":21},"end":{"line":20,"column":68}},"21":{"start":{"line":21,"column":22},"end":{"line":21,"column":70}},"22":{"start":{"line":22,"column":18},"end":{"line":22,"column":60}},"23":{"start":{"line":23,"column":17},"end":{"line":23,"column":51}},"24":{"start":{"line":24,"column":0},"end":{"line":24,"column":26}},"25":{"start":{"line":25,"column":15},"end":{"line":25,"column":42}},"26":{"start":{"line":26,"column":0},"end":{"line":26,"column":39}},"27":{"start":{"line":27,"column":13},"end":{"line":27,"column":37}},"28":{"start":{"line":28,"column":0},"end":{"line":32,"column":4}},"29":{"start":{"line":33,"column":0},"end":{"line":33,"column":42}},"30":{"start":{"line":34,"column":0},"end":{"line":34,"column":91}},"31":{"start":{"line":35,"column":0},"end":{"line":38,"column":3}},"32":{"start":{"line":36,"column":4},"end":{"line":36,"column":39}},"33":{"start":{"line":37,"column":4},"end":{"line":37,"column":34}},"34":{"start":{"line":39,"column":0},"end":{"line":41,"column":3}},"35":{"start":{"line":40,"column":4},"end":{"line":40,"column":38}},"36":{"start":{"line":42,"column":0},"end":{"line":42,"column":50}},"37":{"start":{"line":44,"column":0},"end":{"line":62,"column":3}},"38":{"start":{"line":45,"column":4},"end":{"line":45,"column":51}},"39":{"start":{"line":46,"column":4},"end":{"line":46,"column":43}},"40":{"start":{"line":47,"column":4},"end":{"line":47,"column":39}},"41":{"start":{"line":48,"column":4},"end":{"line":50,"column":5}},"42":{"start":{"line":49,"column":8},"end":{"line":49,"column":41}},"43":{"start":{"line":51,"column":4},"end":{"line":53,"column":5}},"44":{"start":{"line":52,"column":8},"end":{"line":52,"column":41}},"45":{"start":{"line":54,"column":4},"end":{"line":56,"column":5}},"46":{"start":{"line":55,"column":8},"end":{"line":55,"column":41}},"47":{"start":{"line":57,"column":4},"end":{"line":59,"column":5}},"48":{"start":{"line":58,"column":8},"end":{"line":58,"column":45}},"49":{"start":{"line":60,"column":4},"end":{"line":60,"column":45}},"50":{"start":{"line":61,"column":4},"end":{"line":61,"column":61}},"51":{"start":{"line":64,"column":0},"end":{"line":66,"column":3}},"52":{"start":{"line":65,"column":4},"end":{"line":65,"column":50}},"53":{"start":{"line":68,"column":0},"end":{"line":71,"column":4}},"54":{"start":{"line":68,"column":28},"end":{"line":71,"column":2}},"55":{"start":{"line":69,"column":4},"end":{"line":69,"column":31}},"56":{"start":{"line":70,"column":4},"end":{"line":70,"column":20}},"57":{"start":{"line":72,"column":0},"end":{"line":75,"column":4}},"58":{"start":{"line":72,"column":27},"end":{"line":75,"column":2}},"59":{"start":{"line":73,"column":4},"end":{"line":73,"column":31}},"60":{"start":{"line":74,"column":4},"end":{"line":74,"column":20}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":35,"column":21},"end":{"line":35,"column":22}},"loc":{"start":{"line":35,"column":35},"end":{"line":38,"column":1}},"line":35},"9":{"name":"(anonymous_9)","decl":{"start":{"line":39,"column":25},"end":{"line":39,"column":26}},"loc":{"start":{"line":39,"column":39},"end":{"line":41,"column":1}},"line":39},"10":{"name":"(anonymous_10)","decl":{"start":{"line":44,"column":16},"end":{"line":44,"column":17}},"loc":{"start":{"line":44,"column":41},"end":{"line":62,"column":1}},"line":44},"11":{"name":"(anonymous_11)","decl":{"start":{"line":64,"column":25},"end":{"line":64,"column":26}},"loc":{"start":{"line":64,"column":31},"end":{"line":66,"column":1}},"line":64},"12":{"name":"(anonymous_12)","decl":{"start":{"line":68,"column":22},"end":{"line":68,"column":23}},"loc":{"start":{"line":68,"column":28},"end":{"line":71,"column":2}},"line":68},"13":{"name":"(anonymous_13)","decl":{"start":{"line":68,"column":62},"end":{"line":68,"column":63}},"loc":{"start":{"line":68,"column":75},"end":{"line":71,"column":1}},"line":68},"14":{"name":"(anonymous_14)","decl":{"start":{"line":72,"column":21},"end":{"line":72,"column":22}},"loc":{"start":{"line":72,"column":27},"end":{"line":75,"column":2}},"line":72},"15":{"name":"(anonymous_15)","decl":{"start":{"line":72,"column":61},"end":{"line":72,"column":62}},"loc":{"start":{"line":72,"column":74},"end":{"line":75,"column":1}},"line":72}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":27,"column":13},"end":{"line":27,"column":37}},"type":"binary-expr","locations":[{"start":{"line":27,"column":13},"end":{"line":27,"column":29}},{"start":{"line":27,"column":33},"end":{"line":27,"column":37}}],"line":27},"9":{"loc":{"start":{"line":48,"column":4},"end":{"line":50,"column":5}},"type":"if","locations":[{"start":{"line":48,"column":4},"end":{"line":50,"column":5}},{"start":{},"end":{}}],"line":48},"10":{"loc":{"start":{"line":48,"column":8},"end":{"line":48,"column":40}},"type":"binary-expr","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":28}},{"start":{"line":48,"column":32},"end":{"line":48,"column":40}}],"line":48},"11":{"loc":{"start":{"line":51,"column":4},"end":{"line":53,"column":5}},"type":"if","locations":[{"start":{"line":51,"column":4},"end":{"line":53,"column":5}},{"start":{},"end":{}}],"line":51},"12":{"loc":{"start":{"line":54,"column":4},"end":{"line":56,"column":5}},"type":"if","locations":[{"start":{"line":54,"column":4},"end":{"line":56,"column":5}},{"start":{},"end":{}}],"line":54},"13":{"loc":{"start":{"line":57,"column":4},"end":{"line":59,"column":5}},"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":59,"column":5}},{"start":{},"end":{}}],"line":57}},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":7,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":1,"53":1,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":7,"8":1,"9":1,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0},"b":{"0":[1,1,1],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[1,1,1],"6":[4,3],"7":[7,7],"8":[1,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/server.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/server.ts"],"names":[],"mappings":"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","sourcesContent":["import express from \"express\";\r\nimport cors from \"cors\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\nimport authRoutes from \"./routes/authRoutes\";\r\nimport userRoutes from \"./routes/userRoutes\";\r\nimport adminRoutes from \"./routes/adminRoutes\";\r\nimport swaggerDocs from \"./docs/swagger\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config();\r\n\r\nconst prisma = new PrismaClient();\r\nexport const app = express();\r\nconst port = process.env.PORT || 5005;\r\n\r\napp.use(\r\n  cors({\r\n    origin: '*', // Or specify your frontend URL\r\n    methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],\r\n    allowedHeaders: ['Content-Type', 'Authorization'],\r\n  })\r\n);\r\napp.use(express.json());\r\n\r\napp.use(\"/api\", authRoutes, userRoutes, adminRoutes);\r\n\r\n\r\napp.get(\"/\", (req, res) => {\r\n  console.log(\"Root route accessed\");\r\n  res.send(\"Server is running\");\r\n});\r\n\r\napp.get(\"/test\", (req, res) => {\r\n  res.send(\"Test route is working\");\r\n});\r\n\r\n\r\nswaggerDocs(app, Number(port));\r\n\r\n// Error handling middleware\r\napp.use(\r\n  (\r\n    err: any,\r\n    req: express.Request,\r\n    res: express.Response,\r\n    next: express.NextFunction,\r\n  ) => {\r\n    console.error(\"--- Express Error Handler ---\");\r\n    console.error(\"Message:\", err.message);\r\n    console.error(\"Stack:\", err.stack);\r\n    if (err instanceof Error && err.name) {\r\n      console.error(\"Name:\", err.name);\r\n    }\r\n    if (err.code) {\r\n      console.error(\"Code:\", err.code);\r\n    }\r\n    if (err.meta) {\r\n      console.error(\"Meta:\", err.meta);\r\n    }\r\n    if (err.errors) {\r\n      console.error(\"Errors:\", err.errors);\r\n    }\r\n    console.error(\"Full error object:\", err);\r\n    res.status(500).json({ error: \"Internal Server Error\" });\r\n  },\r\n);\r\n\r\n// Start server\r\napp.listen(port, () => {\r\n  console.log(`Server running on port ${port}`);\r\n});\r\n\r\n// Graceful shutdown\r\nprocess.on(\"SIGTERM\", async () => {\r\n  await prisma.$disconnect();\r\n  process.exit(0);\r\n});\r\n\r\nprocess.on(\"SIGINT\", async () => {\r\n  await prisma.$disconnect();\r\n  process.exit(0);\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"533dee4599dbdbf5c1ccbdd0061a4bef5a41ce93","contentHash":"2cc0727f5cb4b96ec66f1a5bf36009757bc33e7eb16c866df920b20286b84313"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\authRoutes.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\authRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":25},"end":{"line":7,"column":65}},"5":{"start":{"line":8,"column":19},"end":{"line":8,"column":69}},"6":{"start":{"line":9,"column":25},"end":{"line":9,"column":65}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":38}},"8":{"start":{"line":11,"column":21},"end":{"line":13,"column":1}},"9":{"start":{"line":11,"column":29},"end":{"line":13,"column":1}},"10":{"start":{"line":12,"column":4},"end":{"line":12,"column":52}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":131}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":119}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":21},"end":{"line":11,"column":22}},"loc":{"start":{"line":11,"column":29},"end":{"line":13,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":29},"end":{"line":11,"column":30}},"loc":{"start":{"line":11,"column":49},"end":{"line":13,"column":1}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":2,"10":3,"11":1,"12":1,"13":1},"f":{"0":1,"1":2,"2":3},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/authRoutes.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/authRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,kEAA2E;AAC3E,sEAA8C;AAC9C,kEAA4E;AAE5E,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,YAAY,GAAG,CAAC,EAAO,EAAE,EAAE,CAAC,CAAC,GAAQ,EAAE,GAAQ,EAAE,IAAS,EAAE,EAAE;IAClE,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;AAClD,CAAC,CAAC;AAEF,MAAM,CAAC,IAAI,CAAC,WAAW,EAAE,IAAA,kBAAQ,EAAC,+BAAc,CAAC,EAAE,YAAY,CAAC,gCAAe,CAAC,CAAC,CAAC;AAClF,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAA,kBAAQ,EAAC,4BAAW,CAAC,EAAE,YAAY,CAAC,0BAAS,CAAC,CAAC,CAAC;AAGtE,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport { registerStudent, loginUser } from \"../controllers/authController\";\r\nimport validate from \"../middleware/validate\";\r\nimport { registerSchema, loginSchema } from \"../validations/authValidation\";\r\n\r\nconst router = Router();\r\n\r\nconst asyncHandler = (fn: any) => (req: any, res: any, next: any) => {\r\n  Promise.resolve(fn(req, res, next)).catch(next);\r\n};\r\n\r\nrouter.post(\"/register\", validate(registerSchema), asyncHandler(registerStudent));\r\nrouter.post(\"/login\", validate(loginSchema), asyncHandler(loginUser));\r\n\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e9cbde2cb42554d44b494664526e4e6a7ec5ee7f","contentHash":"b71a69d0154838844ea2cc23990483a2605920c6bfb6086d52bed894c6ad6010"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\authController.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\authController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":53}},"16":{"start":{"line":16,"column":19},"end":{"line":16,"column":55}},"17":{"start":{"line":17,"column":23},"end":{"line":17,"column":63}},"18":{"start":{"line":18,"column":17},"end":{"line":18,"column":42}},"19":{"start":{"line":19,"column":29},"end":{"line":19,"column":67}},"20":{"start":{"line":20,"column":15},"end":{"line":20,"column":42}},"21":{"start":{"line":21,"column":18},"end":{"line":21,"column":61}},"22":{"start":{"line":22,"column":24},"end":{"line":68,"column":2}},"23":{"start":{"line":22,"column":44},"end":{"line":68,"column":2}},"24":{"start":{"line":23,"column":4},"end":{"line":67,"column":5}},"25":{"start":{"line":24,"column":70},"end":{"line":24,"column":78}},"26":{"start":{"line":26,"column":29},"end":{"line":26,"column":79}},"27":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"28":{"start":{"line":28,"column":12},"end":{"line":28,"column":77}},"29":{"start":{"line":30,"column":31},"end":{"line":30,"column":74}},"30":{"start":{"line":32,"column":35},"end":{"line":32,"column":95}},"31":{"start":{"line":34,"column":24},"end":{"line":44,"column":10}},"32":{"start":{"line":46,"column":22},"end":{"line":46,"column":125}},"33":{"start":{"line":47,"column":8},"end":{"line":62,"column":11}},"34":{"start":{"line":65,"column":8},"end":{"line":65,"column":20}},"35":{"start":{"line":66,"column":8},"end":{"line":66,"column":37}},"36":{"start":{"line":69,"column":0},"end":{"line":69,"column":42}},"37":{"start":{"line":70,"column":18},"end":{"line":107,"column":2}},"38":{"start":{"line":70,"column":38},"end":{"line":107,"column":2}},"39":{"start":{"line":71,"column":4},"end":{"line":106,"column":5}},"40":{"start":{"line":72,"column":36},"end":{"line":72,"column":44}},"41":{"start":{"line":74,"column":21},"end":{"line":74,"column":71}},"42":{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},"43":{"start":{"line":76,"column":12},"end":{"line":76,"column":76}},"44":{"start":{"line":78,"column":32},"end":{"line":78,"column":89}},"45":{"start":{"line":79,"column":8},"end":{"line":81,"column":9}},"46":{"start":{"line":80,"column":12},"end":{"line":80,"column":76}},"47":{"start":{"line":83,"column":22},"end":{"line":85,"column":10}},"48":{"start":{"line":86,"column":8},"end":{"line":101,"column":11}},"49":{"start":{"line":104,"column":8},"end":{"line":104,"column":20}},"50":{"start":{"line":105,"column":8},"end":{"line":105,"column":37}},"51":{"start":{"line":108,"column":0},"end":{"line":108,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":22,"column":24},"end":{"line":22,"column":25}},"loc":{"start":{"line":22,"column":44},"end":{"line":68,"column":2}},"line":22},"9":{"name":"(anonymous_9)","decl":{"start":{"line":22,"column":78},"end":{"line":22,"column":79}},"loc":{"start":{"line":22,"column":91},"end":{"line":68,"column":1}},"line":22},"10":{"name":"(anonymous_10)","decl":{"start":{"line":70,"column":18},"end":{"line":70,"column":19}},"loc":{"start":{"line":70,"column":38},"end":{"line":107,"column":2}},"line":70},"11":{"name":"(anonymous_11)","decl":{"start":{"line":70,"column":72},"end":{"line":70,"column":73}},"loc":{"start":{"line":70,"column":85},"end":{"line":107,"column":1}},"line":70}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":21,"column":18},"end":{"line":21,"column":61}},"type":"binary-expr","locations":[{"start":{"line":21,"column":18},"end":{"line":21,"column":40}},{"start":{"line":21,"column":44},"end":{"line":21,"column":61}}],"line":21},"9":{"loc":{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},"type":"if","locations":[{"start":{"line":27,"column":8},"end":{"line":29,"column":9}},{"start":{},"end":{}}],"line":27},"10":{"loc":{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},"type":"if","locations":[{"start":{"line":75,"column":8},"end":{"line":77,"column":9}},{"start":{},"end":{}}],"line":75},"11":{"loc":{"start":{"line":79,"column":8},"end":{"line":81,"column":9}},"type":"if","locations":[{"start":{"line":79,"column":8},"end":{"line":81,"column":9}},{"start":{},"end":{}}],"line":79}},"s":{"0":2,"1":8,"2":5,"3":5,"4":8,"5":8,"6":0,"7":0,"8":0,"9":0,"10":13,"11":5,"12":2,"13":4,"14":2,"15":2,"16":2,"17":2,"18":2,"19":2,"20":2,"21":2,"22":2,"23":3,"24":3,"25":3,"26":3,"27":3,"28":1,"29":2,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":2,"37":2,"38":2,"39":2,"40":2,"41":2,"42":1,"43":0,"44":1,"45":1,"46":0,"47":1,"48":1,"49":1,"50":1,"51":2},"f":{"0":5,"1":8,"2":5,"3":5,"4":8,"5":0,"6":13,"7":4,"8":3,"9":3,"10":2,"11":2},"b":{"0":[2,2,2],"1":[3,5],"2":[5,5],"3":[5,8],"4":[5,5],"5":[2,2,2],"6":[0,4],"7":[4,4],"8":[2,0],"9":[1,2],"10":[0,1],"11":[0,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/authController.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/authController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response } from \"express\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\nimport { generateRegistrationNumber } from \"../utils/registrationNumber\";\r\nimport { Role, UserDto, UserResponse, AuthSuccessResponse, MessageResponse } from \"../types\";\r\n\r\nconst prisma = new PrismaClient();\r\nconst jwtSecret = process.env.JWT_SECRET || \"your_jwt_secret\";\r\n\r\nexport const registerStudent = async (\r\n  req: Request<{}, {}, UserDto>,\r\n  res: Response<AuthSuccessResponse | MessageResponse>,\r\n  next: Function,\r\n): Promise<Response<AuthSuccessResponse | MessageResponse>> => {\r\n  try {\r\n    const { firstName, lastName, email, password, dateOfBirth } = req.body;\r\n\r\n    // Check if user already exists\r\n    const existingUser = await prisma.user.findUnique({ where: { email } });\r\n    if (existingUser) {\r\n      return res.status(400).json({ message: \"Email already in use\" });\r\n    }\r\n\r\n  \r\n    const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n    // Generate registration number\r\n    const registrationNumber = await generateRegistrationNumber();\r\n\r\n    // Create new user\r\n    const newUser = await prisma.user.create({\r\n      data: {\r\n        firstName,\r\n        lastName,\r\n        email,\r\n        password: hashedPassword,\r\n        registrationNumber,\r\n        dateOfBirth: new Date(dateOfBirth),\r\n        role: \"student\",\r\n      },\r\n    });\r\n\r\n    // Generate JWT token\r\n    const token = jwt.sign(\r\n      { userId: newUser.id, role: newUser.role },\r\n      jwtSecret,\r\n      { expiresIn: \"1h\" },\r\n    );\r\n\r\n    return res.status(201).json({\r\n      message: \"Student registered successfully\",\r\n      user: {\r\n        id: newUser.id,\r\n        firstName: newUser.firstName,\r\n        lastName: newUser.lastName,\r\n        email: newUser.email,\r\n        password: newUser.password,\r\n        registrationNumber: newUser.registrationNumber,\r\n        dateOfBirth: newUser.dateOfBirth,\r\n        role: newUser.role as Role,\r\n        createdAt: newUser.createdAt,\r\n        updatedAt: newUser.updatedAt,\r\n      },\r\n      token,\r\n    });\r\n  } catch (error) {\r\n    next(error);\r\n    return Promise.reject(error);\r\n  }\r\n};\r\n\r\nexport const loginUser = async (\r\n  req: Request,\r\n  res: Response<AuthSuccessResponse | MessageResponse>,\r\n  next: Function,\r\n): Promise<Response<AuthSuccessResponse | MessageResponse>> => {\r\n  try {\r\n    const { email, password } = req.body;\r\n\r\n    // Find user by email\r\n    const user = await prisma.user.findUnique({ where: { email } });\r\n    if (!user) {\r\n      return res.status(401).json({ message: \"Invalid credentials\" });\r\n      \r\n    }\r\n\r\n    const isPasswordValid = await bcrypt.compare(password, user.password);\r\n    if (!isPasswordValid) {\r\n      return res.status(401).json({ message: \"Invalid credentials\" });\r\n       \r\n    }\r\n\r\n    // Generate JWT token\r\n    const token = jwt.sign({ userId: user.id, role: user.role }, jwtSecret, {\r\n      expiresIn: \"1h\",\r\n    });\r\n\r\n    return res.status(200).json({\r\n      message: \"Login successful\",\r\n      user: {\r\n        id: user.id,\r\n        firstName: user.firstName,\r\n        lastName: user.lastName,\r\n        email: user.email,\r\n        password: user.password,\r\n        registrationNumber: user.registrationNumber,\r\n        dateOfBirth: user.dateOfBirth,\r\n        role: user.role as Role,\r\n        createdAt: user.createdAt,\r\n        updatedAt: user.updatedAt,\r\n      },\r\n      token,\r\n    });\r\n  } catch (error) {\r\n    next(error);\r\n    return Promise.reject(error);\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d914fa451f421038067807af667c302ee13e6b9e","contentHash":"d4d80d41815fe4c37eab62294fda763bef6ef3b86ba6727e0b39de56512f21b7"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\utils\\registrationNumber.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\utils\\registrationNumber.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":64}},"14":{"start":{"line":13,"column":17},"end":{"line":13,"column":42}},"15":{"start":{"line":14,"column":15},"end":{"line":14,"column":42}},"16":{"start":{"line":16,"column":4},"end":{"line":40,"column":7}},"17":{"start":{"line":17,"column":28},"end":{"line":17,"column":73}},"18":{"start":{"line":18,"column":23},"end":{"line":18,"column":42}},"19":{"start":{"line":20,"column":25},"end":{"line":29,"column":10}},"20":{"start":{"line":30,"column":29},"end":{"line":30,"column":30}},"21":{"start":{"line":31,"column":8},"end":{"line":36,"column":9}},"22":{"start":{"line":32,"column":33},"end":{"line":32,"column":94}},"23":{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},"24":{"start":{"line":34,"column":16},"end":{"line":34,"column":50}},"25":{"start":{"line":38,"column":31},"end":{"line":38,"column":73}},"26":{"start":{"line":39,"column":8},"end":{"line":39,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"generateRegistrationNumber","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":35}},"loc":{"start":{"line":15,"column":38},"end":{"line":41,"column":1}},"line":15},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":43},"end":{"line":16,"column":44}},"loc":{"start":{"line":16,"column":56},"end":{"line":40,"column":5}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":31,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":36,"column":9}},{"start":{},"end":{}}],"line":31},"6":{"loc":{"start":{"line":31,"column":12},"end":{"line":31,"column":70}},"type":"binary-expr","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":20}},{"start":{"line":31,"column":24},"end":{"line":31,"column":70}}],"line":31},"7":{"loc":{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},{"start":{},"end":{}}],"line":33}},"s":{"0":1,"1":4,"2":4,"3":4,"4":4,"5":4,"6":0,"7":0,"8":0,"9":0,"10":8,"11":4,"12":1,"13":1,"14":1,"15":1,"16":4,"17":4,"18":4,"19":4,"20":4,"21":4,"22":1,"23":1,"24":1,"25":4,"26":4},"f":{"0":4,"1":4,"2":4,"3":4,"4":4,"5":0,"6":8,"7":4,"8":4},"b":{"0":[1,1,1],"1":[0,4],"2":[4,4],"3":[4,4],"4":[4,4],"5":[1,3],"6":[4,1],"7":[1,0]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/utils/registrationNumber.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/utils/registrationNumber.ts"],"names":[],"mappings":";;;;;;;;;;;AAIA,gEAgCC;AApCD,2CAA8C;AAE9C,MAAM,MAAM,GAAG,IAAI,qBAAY,EAAE,CAAC;AAElC,SAAsB,0BAA0B;;QAC9C,MAAM,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;QAClE,MAAM,MAAM,GAAG,MAAM,WAAW,EAAE,CAAC;QAEnC,wEAAwE;QACxE,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;YAC3C,KAAK,EAAE;gBACL,kBAAkB,EAAE;oBAClB,UAAU,EAAE,MAAM;iBACnB;aACF;YACD,OAAO,EAAE;gBACP,kBAAkB,EAAE,MAAM;aAC3B;SACF,CAAC,CAAC;QAEH,IAAI,cAAc,GAAG,CAAC,CAAC;QAEvB,IAAI,QAAQ,IAAI,QAAQ,CAAC,kBAAkB,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC;YAC/D,MAAM,YAAY,GAAG,QAAQ,CAC3B,QAAQ,CAAC,kBAAkB,CAAC,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAC/C,EAAE,CACH,CAAC;YACF,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC;gBACzB,cAAc,GAAG,YAAY,GAAG,CAAC,CAAC;YACpC,CAAC;QACH,CAAC;QAED,6CAA6C;QAC7C,MAAM,cAAc,GAAG,cAAc,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAElE,OAAO,GAAG,MAAM,GAAG,cAAc,EAAE,CAAC;IACtC,CAAC;CAAA","sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst prisma = new PrismaClient();\n\nexport async function generateRegistrationNumber(): Promise<string> {\n  const currentYear = new Date().getFullYear().toString().slice(-2);\n  const prefix = `REG${currentYear}`;\n\n  // Find the highest existing registration number with the current prefix\n  const lastUser = await prisma.user.findFirst({\n    where: {\n      registrationNumber: {\n        startsWith: prefix,\n      },\n    },\n    orderBy: {\n      registrationNumber: \"desc\",\n    },\n  });\n\n  let sequenceNumber = 1;\n\n  if (lastUser && lastUser.registrationNumber.startsWith(prefix)) {\n    const lastSequence = parseInt(\n      lastUser.registrationNumber.replace(prefix, \"\"),\n      10,\n    );\n    if (!isNaN(lastSequence)) {\n      sequenceNumber = lastSequence + 1;\n    }\n  }\n\n  // Pad with leading zeros to make it 5 digits\n  const paddedSequence = sequenceNumber.toString().padStart(5, \"0\");\n\n  return `${prefix}${paddedSequence}`;\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4ec49b126779320dae1746b13a8e4024290ee3c9","contentHash":"1efac21bc3fa773f84c4c9ffbee31113a7b0d9893c8acaf4d803bcecde057fac"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\validate.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\validate.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":17},"end":{"line":15,"column":1}},"2":{"start":{"line":3,"column":29},"end":{"line":15,"column":1}},"3":{"start":{"line":4,"column":19},"end":{"line":4,"column":45}},"4":{"start":{"line":5,"column":4},"end":{"line":13,"column":5}},"5":{"start":{"line":6,"column":8},"end":{"line":11,"column":11}},"6":{"start":{"line":7,"column":50},"end":{"line":10,"column":13}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":15}},"8":{"start":{"line":14,"column":4},"end":{"line":14,"column":11}},"9":{"start":{"line":16,"column":0},"end":{"line":16,"column":27}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":17},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":29},"end":{"line":15,"column":1}},"line":3},"1":{"name":"(anonymous_1)","decl":{"start":{"line":3,"column":29},"end":{"line":3,"column":30}},"loc":{"start":{"line":3,"column":49},"end":{"line":15,"column":1}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":7,"column":44},"end":{"line":7,"column":45}},"loc":{"start":{"line":7,"column":50},"end":{"line":10,"column":13}},"line":7}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":4},"end":{"line":13,"column":5}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":13,"column":5}},{"start":{},"end":{}}],"line":5}},"s":{"0":1,"1":1,"2":3,"3":8,"4":8,"5":5,"6":6,"7":5,"8":3,"9":1},"f":{"0":3,"1":8,"2":6},"b":{"0":[5,3]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/validate.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/validate.ts"],"names":[],"mappings":";;AAGA,MAAM,QAAQ,GACZ,CAAC,MAAoB,EAAE,EAAE,CACzB,CAAC,GAAY,EAAE,GAAa,EAAE,IAAkB,EAAQ,EAAE;IACxD,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC1C,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;QACpB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YACnB,MAAM,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;gBACpC,IAAI,EAAE,CAAC,CAAC,IAAI;gBACZ,OAAO,EAAE,CAAC,CAAC,OAAO;aACnB,CAAC,CAAC;SACJ,CAAC,CAAC;QACH,OAAO;IACT,CAAC;IACD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;AAEJ,kBAAe,QAAQ,CAAC","sourcesContent":["import { Request, Response, NextFunction } from \"express\";\r\nimport { AnyZodObject } from \"zod\";\r\n\r\nconst validate =\r\n  (schema: AnyZodObject) =>\r\n  (req: Request, res: Response, next: NextFunction): void => {\r\n    const result = schema.safeParse(req.body);\r\n    if (!result.success) {\r\n      res.status(400).json({\r\n        errors: result.error.errors.map(e => ({\r\n          path: e.path,\r\n          message: e.message\r\n        }))\r\n      });\r\n      return;\r\n    }\r\n    next();\r\n  };\r\n\r\nexport default validate;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"d9ec083cb76a221a68978d3954db6b0c961901f6","contentHash":"a1847d3f9bf17faaf9edb50623ab7bd9177ffb708ae812344d59c199a2d3822a"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\validations\\authValidation.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\validations\\authValidation.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":54}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":0},"end":{"line":21,"column":3}},"4":{"start":{"line":22,"column":0},"end":{"line":29,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/validations/authValidation.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/validations/authValidation.ts"],"names":[],"mappings":";;;AAAA,6BAAwB;AAEX,QAAA,cAAc,GAAG,OAAC,CAAC,MAAM,CAAC;IACrC,SAAS,EAAE,OAAC;SACT,MAAM,CAAC,EAAE,cAAc,EAAE,wBAAwB,EAAE,CAAC;SACpD,GAAG,CAAC,CAAC,EAAE,0CAA0C,CAAC;IACrD,QAAQ,EAAE,OAAC;SACR,MAAM,CAAC,EAAE,cAAc,EAAE,uBAAuB,EAAE,CAAC;SACnD,GAAG,CAAC,CAAC,EAAE,yCAAyC,CAAC;IACpD,KAAK,EAAE,OAAC;SACL,MAAM,CAAC,EAAE,cAAc,EAAE,mBAAmB,EAAE,CAAC;SAC/C,KAAK,CAAC,oCAAoC,CAAC;IAC9C,QAAQ,EAAE,OAAC;SACR,MAAM,CAAC,EAAE,cAAc,EAAE,sBAAsB,EAAE,CAAC;SAClD,GAAG,CAAC,CAAC,EAAE,wCAAwC,CAAC;IACnD,WAAW,EAAE,OAAC;SACX,MAAM,CAAC,EAAE,cAAc,EAAE,2BAA2B,EAAE,CAAC;SACvD,KAAK,CAAC,8BAA8B,EAAE,4CAA4C,CAAC;CACvF,CAAC,CAAC;AAEU,QAAA,WAAW,GAAG,OAAC,CAAC,MAAM,CAAC;IAClC,KAAK,EAAE,OAAC;SACL,MAAM,CAAC,EAAE,cAAc,EAAE,mBAAmB,EAAE,CAAC;SAC/C,KAAK,CAAC,oCAAoC,CAAC;IAC9C,QAAQ,EAAE,OAAC;SACR,MAAM,CAAC,EAAE,cAAc,EAAE,sBAAsB,EAAE,CAAC;SAClD,GAAG,CAAC,CAAC,EAAE,sBAAsB,CAAC;CAClC,CAAC,CAAC","sourcesContent":["import { z } from \"zod\";\r\n\r\nexport const registerSchema = z.object({\r\n  firstName: z\r\n    .string({ required_error: \"First name is required\" })\r\n    .min(2, \"First name must be at least 2 characters\"),\r\n  lastName: z\r\n    .string({ required_error: \"Last name is required\" })\r\n    .min(2, \"Last name must be at least 2 characters\"),\r\n  email: z\r\n    .string({ required_error: \"Email is required\" })\r\n    .email(\"Please enter a valid email address\"),\r\n  password: z\r\n    .string({ required_error: \"Password is required\" })\r\n    .min(6, \"Password must be at least 6 characters\"),\r\n  dateOfBirth: z\r\n    .string({ required_error: \"Date of birth is required\" })\r\n    .regex(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/, \"Date of birth must be in YYYY-MM-DD format\"),\r\n});\r\n\r\nexport const loginSchema = z.object({\r\n  email: z\r\n    .string({ required_error: \"Email is required\" })\r\n    .email(\"Please enter a valid email address\"),\r\n  password: z\r\n    .string({ required_error: \"Password is required\" })\r\n    .min(1, \"Password is required\"),\r\n});\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1c3723757cdaf6fde22eb6c629c2b67f1a4f5fd9","contentHash":"e60473101ab8381567e8988b55da936d8b67943f3b4099d0f605ff78c826507f"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\userRoutes.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\userRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":25},"end":{"line":7,"column":65}},"5":{"start":{"line":8,"column":23},"end":{"line":8,"column":77}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":38}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":79}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":88}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/userRoutes.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/userRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,kEAA2E;AAC3E,8EAAsD;AAEtD,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAIxB,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,sBAAY,EAAE,4BAAW,CAAC,CAAC;AACpD,MAAM,CAAC,GAAG,CAAC,mBAAmB,EAAE,sBAAY,EAAE,8BAAa,CAAC,CAAC;AAG7D,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport { getUserById, getUserQRCode } from '../controllers/userController';\r\nimport authenticate from \"../middleware/authenticate\";\r\n\r\nconst router = Router();\r\n\r\n\r\n\r\nrouter.get('/users/:id', authenticate, getUserById);\r\nrouter.get('/users/:id/qrcode', authenticate, getUserQRCode);\r\n\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f6be7c8214e5686e9f06a1ceafcf32a32230854b","contentHash":"50b70d1e6a075cecdd7f8b6d18f44a5d18bff5fcc96e83faa47a127f29ec2337"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\userController.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\userController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"13":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"14":{"start":{"line":14,"column":0},"end":{"line":14,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":53}},"16":{"start":{"line":16,"column":17},"end":{"line":16,"column":42}},"17":{"start":{"line":17,"column":17},"end":{"line":17,"column":51}},"18":{"start":{"line":18,"column":15},"end":{"line":18,"column":42}},"19":{"start":{"line":19,"column":20},"end":{"line":45,"column":2}},"20":{"start":{"line":19,"column":34},"end":{"line":45,"column":2}},"21":{"start":{"line":20,"column":19},"end":{"line":20,"column":32}},"22":{"start":{"line":21,"column":4},"end":{"line":44,"column":5}},"23":{"start":{"line":22,"column":21},"end":{"line":36,"column":10}},"24":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"25":{"start":{"line":38,"column":12},"end":{"line":38,"column":71}},"26":{"start":{"line":40,"column":8},"end":{"line":40,"column":97}},"27":{"start":{"line":43,"column":8},"end":{"line":43,"column":74}},"28":{"start":{"line":46,"column":0},"end":{"line":46,"column":34}},"29":{"start":{"line":47,"column":22},"end":{"line":83,"column":2}},"30":{"start":{"line":47,"column":36},"end":{"line":83,"column":2}},"31":{"start":{"line":48,"column":19},"end":{"line":48,"column":32}},"32":{"start":{"line":49,"column":4},"end":{"line":82,"column":5}},"33":{"start":{"line":50,"column":21},"end":{"line":59,"column":10}},"34":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"35":{"start":{"line":61,"column":12},"end":{"line":61,"column":71}},"36":{"start":{"line":63,"column":23},"end":{"line":68,"column":9}},"37":{"start":{"line":69,"column":25},"end":{"line":69,"column":47}},"38":{"start":{"line":70,"column":24},"end":{"line":70,"column":109}},"39":{"start":{"line":72,"column":20},"end":{"line":72,"column":64}},"40":{"start":{"line":73,"column":8},"end":{"line":76,"column":11}},"41":{"start":{"line":77,"column":8},"end":{"line":77,"column":21}},"42":{"start":{"line":80,"column":8},"end":{"line":80,"column":47}},"43":{"start":{"line":81,"column":8},"end":{"line":81,"column":74}},"44":{"start":{"line":84,"column":0},"end":{"line":84,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"(anonymous_7)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"8":{"name":"(anonymous_8)","decl":{"start":{"line":19,"column":20},"end":{"line":19,"column":21}},"loc":{"start":{"line":19,"column":34},"end":{"line":45,"column":2}},"line":19},"9":{"name":"(anonymous_9)","decl":{"start":{"line":19,"column":68},"end":{"line":19,"column":69}},"loc":{"start":{"line":19,"column":81},"end":{"line":45,"column":1}},"line":19},"10":{"name":"(anonymous_10)","decl":{"start":{"line":47,"column":22},"end":{"line":47,"column":23}},"loc":{"start":{"line":47,"column":36},"end":{"line":83,"column":2}},"line":47},"11":{"name":"(anonymous_11)","decl":{"start":{"line":47,"column":70},"end":{"line":47,"column":71}},"loc":{"start":{"line":47,"column":83},"end":{"line":83,"column":1}},"line":47}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"6":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"7":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"8":{"loc":{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},"type":"if","locations":[{"start":{"line":37,"column":8},"end":{"line":39,"column":9}},{"start":{},"end":{}}],"line":37},"9":{"loc":{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},"type":"if","locations":[{"start":{"line":60,"column":8},"end":{"line":62,"column":9}},{"start":{},"end":{}}],"line":60}},"s":{"0":1,"1":7,"2":6,"3":6,"4":7,"5":7,"6":2,"7":0,"8":0,"9":0,"10":11,"11":6,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":4,"21":4,"22":4,"23":4,"24":4,"25":3,"26":1,"27":1,"28":1,"29":1,"30":2,"31":2,"32":2,"33":2,"34":2,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1},"f":{"0":6,"1":7,"2":6,"3":6,"4":7,"5":0,"6":11,"7":1,"8":4,"9":4,"10":2,"11":2},"b":{"0":[1,1,1],"1":[1,6],"2":[6,6],"3":[4,7],"4":[6,6],"5":[1,1,1],"6":[0,1],"7":[1,1],"8":[3,1],"9":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/userController.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/userController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response } from \"express\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\nimport { Role, UserResponse, MessageResponse } from \"../types\";\r\nimport QRCode from \"qrcode\";\r\nimport { date } from \"zod\";\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nexport const getUserById = async (\r\n  req: Request,\r\n  res: Response\r\n): Promise<UserResponse | MessageResponse | any > => {\r\n  const userId = req.params.id;\r\n  try {\r\n    const user = await prisma.user.findUnique({\r\n      where: { id: userId },\r\n      select: {\r\n        id: true,\r\n        firstName: true,\r\n        lastName: true,\r\n        email: true,\r\n        registrationNumber: true,\r\n        dateOfBirth: true,\r\n        role: true,\r\n        createdAt: true,\r\n        password: true,\r\n        updatedAt: true,\r\n      },\r\n    });\r\n    if (!user) {\r\n      return res.status(404).json({ message: \"User not found\" });\r\n    }\r\n    return res.status(200).json({ ...user, role: user.role as Role });\r\n  } catch (error) {\r\n    return res.status(500).json({ message: \"Internal server error\" });\r\n  }\r\n};\r\n\r\nexport const getUserQRCode = async (\r\n  req: Request,\r\n  res: Response\r\n): Promise<UserResponse | MessageResponse | any > => {\r\n  const userId = req.params.id;\r\n  try {\r\n    const user = await prisma.user.findUnique({\r\n      where: { id: userId },\r\n      select: {\r\n        firstName: true,\r\n        lastName: true,\r\n        email: true,\r\n        registrationNumber: true,\r\n        dateOfBirth: true,\r\n      },\r\n    });\r\n    if (!user) {\r\n      return res.status(404).json({ message: \"User not found\" });\r\n    }\r\n    const qrData = {\r\n      name: `${user.firstName} ${user.lastName}`,\r\n      email: user.email,\r\n      registrationNumber: user.registrationNumber,\r\n      dateOfBirth: user.dateOfBirth,\r\n    };\r\n    const qrString = JSON.stringify(qrData);\r\n    const qrImage = await QRCode.toDataURL(qrString, { errorCorrectionLevel: 'M', width: 300 });\r\n    // Remove the data URL prefix and send as PNG\r\n    const img = Buffer.from(qrImage.split(\",\")[1], \"base64\");\r\n    res.writeHead(200, {\r\n      \"Content-Type\": \"image/png\",\r\n      \"Content-Length\": img.length,\r\n    });\r\n    res.end(img);\r\n  } catch (error) {\r\n    console.error(\"QR code error:\", error);\r\n    return res.status(500).json({ message: \"Internal server error\" });\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a1dc1197af8396b86a3355f6be04c62999a0c71a","contentHash":"32df5822ff331072bc91b2d43b10e5e32b67ffadd70a4386ab27ffc5d2ac1f6e"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\authenticate.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\authenticate.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":23},"end":{"line":6,"column":63}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":61}},"5":{"start":{"line":8,"column":21},"end":{"line":25,"column":1}},"6":{"start":{"line":10,"column":18},"end":{"line":10,"column":115}},"7":{"start":{"line":11,"column":4},"end":{"line":14,"column":5}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":63}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":15}},"10":{"start":{"line":15,"column":4},"end":{"line":24,"column":5}},"11":{"start":{"line":16,"column":24},"end":{"line":16,"column":71}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":36}},"13":{"start":{"line":18,"column":8},"end":{"line":18,"column":32}},"14":{"start":{"line":19,"column":8},"end":{"line":19,"column":15}},"15":{"start":{"line":22,"column":8},"end":{"line":22,"column":54}},"16":{"start":{"line":23,"column":8},"end":{"line":23,"column":59}},"17":{"start":{"line":26,"column":0},"end":{"line":26,"column":31}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":21},"end":{"line":8,"column":22}},"loc":{"start":{"line":8,"column":41},"end":{"line":25,"column":1}},"line":8}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":7,"column":18},"end":{"line":7,"column":61}},"type":"binary-expr","locations":[{"start":{"line":7,"column":18},"end":{"line":7,"column":40}},{"start":{"line":7,"column":44},"end":{"line":7,"column":61}}],"line":7},"4":{"loc":{"start":{"line":10,"column":18},"end":{"line":10,"column":115}},"type":"cond-expr","locations":[{"start":{"line":10,"column":81},"end":{"line":10,"column":87}},{"start":{"line":10,"column":90},"end":{"line":10,"column":115}}],"line":10},"5":{"loc":{"start":{"line":10,"column":18},"end":{"line":10,"column":78}},"type":"binary-expr","locations":[{"start":{"line":10,"column":18},"end":{"line":10,"column":61}},{"start":{"line":10,"column":65},"end":{"line":10,"column":78}}],"line":10},"6":{"loc":{"start":{"line":11,"column":4},"end":{"line":14,"column":5}},"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":14,"column":5}},{"start":{},"end":{}}],"line":11}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":16,"7":16,"8":2,"9":2,"10":14,"11":14,"12":13,"13":13,"14":13,"15":1,"16":1,"17":1},"f":{"0":1,"1":16},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[1,0],"4":[2,14],"5":[16,16],"6":[2,14]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/authenticate.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/authenticate.ts"],"names":[],"mappings":";;;;;AACA,gEAA+B;AAE/B,MAAM,SAAS,GAAG,OAAO,CAAC,GAAG,CAAC,UAAU,IAAI,iBAAiB,CAAC;AAO9D,MAAM,YAAY,GAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;;IACtD,MAAM,KAAK,GAAG,MAAA,GAAG,CAAC,MAAM,CAAC,eAAe,CAAC,0CAAE,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC;IAElE,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC,CAAC;QACvD,OAAO;IACT,CAAC;IAED,IAAI,CAAC;QACH,MAAM,OAAO,GAAG,sBAAG,CAAC,MAAM,CAAC,KAAK,EAAE,SAAS,CAG1C,CAAC;QACD,GAA4B,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;QACrD,GAA4B,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;QAClD,IAAI,EAAE,CAAC;IACT,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,uBAAuB,EAAE,KAAK,CAAC,CAAC;QAC9C,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,eAAe,EAAE,CAAC,CAAC;IACrD,CAAC;AACH,CAAC,CAAC;AAEF,kBAAe,YAAY,CAAC","sourcesContent":["import { Request, RequestHandler } from \"express\";\nimport jwt from \"jsonwebtoken\";\n\nconst jwtSecret = process.env.JWT_SECRET || \"your_jwt_secret\";\n\ninterface AuthenticatedRequest extends Request {\n  userId?: string;\n  role?: string;\n}\n\nconst authenticate: RequestHandler = (req, res, next) => {\n  const token = req.header(\"Authorization\")?.replace(\"Bearer \", \"\");\n\n  if (!token) {\n    res.status(401).json({ message: \"No token provided\" });\n    return;\n  }\n\n  try {\n    const decoded = jwt.verify(token, jwtSecret) as {\n      userId: string;\n      role: string;\n    };\n    (req as AuthenticatedRequest).userId = decoded.userId;\n    (req as AuthenticatedRequest).role = decoded.role;\n    next();\n  } catch (error) {\n    console.error(\"Authentication error:\", error);\n    res.status(401).json({ message: \"Invalid token\" });\n  }\n};\n\nexport default authenticate;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"36452ea553dc254d29c51f5565978bda184f6290","contentHash":"b9af39a623bcfe4a0fd6b11ba01257444801e2013ce1ae19139a807eb6321528"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\adminRoutes.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\routes\\adminRoutes.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":36}},"4":{"start":{"line":7,"column":26},"end":{"line":7,"column":67}},"5":{"start":{"line":8,"column":23},"end":{"line":8,"column":77}},"6":{"start":{"line":9,"column":25},"end":{"line":9,"column":81}},"7":{"start":{"line":10,"column":19},"end":{"line":10,"column":69}},"8":{"start":{"line":11,"column":25},"end":{"line":11,"column":65}},"9":{"start":{"line":12,"column":15},"end":{"line":12,"column":38}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":61}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":58}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":121}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":64}},"14":{"start":{"line":17,"column":0},"end":{"line":17,"column":63}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":62}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1},"f":{"0":3},"b":{"0":[1,1,1],"1":[3,0],"2":[3,3]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/adminRoutes.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/routes/adminRoutes.ts"],"names":[],"mappings":";;;;;AAAA,qCAAiC;AACjC,oEAMwC;AACxC,8EAAsD;AACtD,kFAA0D;AAC1D,sEAA8C;AAC9C,kEAAiE;AAEjE,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,MAAM,CAAC,GAAG,CAAC,sBAAY,EAAE,wBAAc,CAAC,CAAC;AAEzC,MAAM,CAAC,GAAG,CAAC,cAAc,EAAE,6BAAW,CAAC,CAAC;AACxC,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAA,kBAAQ,EAAC,iCAAgB,CAAC,EAAE,4BAAU,CAAC,CAAC;AACvE,MAAM,CAAC,MAAM,CAAC,kBAAkB,EAAE,4BAAU,CAAC,CAAC;AAC9C,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,8BAAY,CAAC,CAAC;AAC7C,MAAM,CAAC,GAAG,CAAC,kBAAkB,EAAE,6BAAW,CAAC,CAAC;AAE5C,kBAAe,MAAM,CAAC","sourcesContent":["import { Router } from \"express\";\r\nimport {\r\n  getAllUsers,\r\n  updateUser,\r\n  deleteUser,\r\n  getAnalytics,\r\n  getAuditLog,\r\n} from \"../controllers/adminController\";\r\nimport authenticate from \"../middleware/authenticate\";\r\nimport authorizeAdmin from \"../middleware/authorizeAdmin\";\r\nimport validate from \"../middleware/validate\";\r\nimport { updateUserSchema } from \"../validations/userValidation\";\r\n\r\nconst router = Router();\r\n\r\nrouter.use(authenticate, authorizeAdmin);\r\n\r\nrouter.get(\"/admin/users\", getAllUsers);\r\nrouter.put(\"/admin/users/:id\", validate(updateUserSchema), updateUser);\r\nrouter.delete(\"/admin/users/:id\", deleteUser);\r\nrouter.get(\"/admin/analytics\", getAnalytics);\r\nrouter.get(\"/admin/audit-log\", getAuditLog);\r\n\r\nexport default router;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cb8bd67ac9bd032e2f39ca0b0885bb021bcf62d8","contentHash":"cb5d75188c0e1c0debb84a30208de3502bf53fca1bc44fa53190e9d69d0ec5fe"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\adminController.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\controllers\\adminController.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":135}},"14":{"start":{"line":13,"column":0},"end":{"line":13,"column":28}},"15":{"start":{"line":14,"column":17},"end":{"line":14,"column":42}},"16":{"start":{"line":15,"column":15},"end":{"line":15,"column":42}},"17":{"start":{"line":17,"column":0},"end":{"line":17,"column":22}},"18":{"start":{"line":19,"column":4},"end":{"line":26,"column":7}},"19":{"start":{"line":27,"column":4},"end":{"line":28,"column":31}},"20":{"start":{"line":28,"column":8},"end":{"line":28,"column":31}},"21":{"start":{"line":30,"column":20},"end":{"line":32,"column":2}},"22":{"start":{"line":30,"column":34},"end":{"line":32,"column":2}},"23":{"start":{"line":31,"column":4},"end":{"line":31,"column":65}},"24":{"start":{"line":33,"column":0},"end":{"line":33,"column":34}},"25":{"start":{"line":34,"column":20},"end":{"line":74,"column":2}},"26":{"start":{"line":34,"column":40},"end":{"line":74,"column":2}},"27":{"start":{"line":35,"column":4},"end":{"line":73,"column":5}},"28":{"start":{"line":36,"column":21},"end":{"line":36,"column":50}},"29":{"start":{"line":37,"column":22},"end":{"line":37,"column":53}},"30":{"start":{"line":38,"column":21},"end":{"line":38,"column":39}},"31":{"start":{"line":39,"column":36},"end":{"line":58,"column":10}},"32":{"start":{"line":60,"column":28},"end":{"line":60,"column":110}},"33":{"start":{"line":60,"column":49},"end":{"line":60,"column":108}},"34":{"start":{"line":61,"column":8},"end":{"line":69,"column":11}},"35":{"start":{"line":72,"column":8},"end":{"line":72,"column":20}},"36":{"start":{"line":75,"column":0},"end":{"line":75,"column":34}},"37":{"start":{"line":76,"column":21},"end":{"line":104,"column":2}},"38":{"start":{"line":76,"column":41},"end":{"line":104,"column":2}},"39":{"start":{"line":77,"column":4},"end":{"line":103,"column":5}},"40":{"start":{"line":78,"column":70},"end":{"line":93,"column":10}},"41":{"start":{"line":94,"column":8},"end":{"line":99,"column":11}},"42":{"start":{"line":102,"column":8},"end":{"line":102,"column":20}},"43":{"start":{"line":105,"column":0},"end":{"line":105,"column":36}},"44":{"start":{"line":106,"column":19},"end":{"line":142,"column":2}},"45":{"start":{"line":106,"column":39},"end":{"line":142,"column":2}},"46":{"start":{"line":108,"column":4},"end":{"line":141,"column":5}},"47":{"start":{"line":109,"column":23},"end":{"line":109,"column":36}},"48":{"start":{"line":111,"column":30},"end":{"line":118,"column":9}},"49":{"start":{"line":119,"column":25},"end":{"line":119,"column":27}},"50":{"start":{"line":120,"column":8},"end":{"line":124,"column":9}},"51":{"start":{"line":121,"column":12},"end":{"line":123,"column":13}},"52":{"start":{"line":122,"column":16},"end":{"line":122,"column":50}},"53":{"start":{"line":126,"column":8},"end":{"line":128,"column":9}},"54":{"start":{"line":127,"column":12},"end":{"line":127,"column":66}},"55":{"start":{"line":129,"column":8},"end":{"line":131,"column":9}},"56":{"start":{"line":130,"column":12},"end":{"line":130,"column":76}},"57":{"start":{"line":132,"column":8},"end":{"line":135,"column":11}},"58":{"start":{"line":136,"column":8},"end":{"line":136,"column":124}},"59":{"start":{"line":137,"column":8},"end":{"line":137,"column":78}},"60":{"start":{"line":140,"column":8},"end":{"line":140,"column":20}},"61":{"start":{"line":143,"column":0},"end":{"line":143,"column":32}},"62":{"start":{"line":144,"column":19},"end":{"line":166,"column":2}},"63":{"start":{"line":144,"column":39},"end":{"line":166,"column":2}},"64":{"start":{"line":146,"column":4},"end":{"line":165,"column":5}},"65":{"start":{"line":147,"column":23},"end":{"line":147,"column":33}},"66":{"start":{"line":149,"column":29},"end":{"line":149,"column":76}},"67":{"start":{"line":150,"column":8},"end":{"line":153,"column":9}},"68":{"start":{"line":151,"column":12},"end":{"line":151,"column":64}},"69":{"start":{"line":152,"column":12},"end":{"line":152,"column":19}},"70":{"start":{"line":154,"column":8},"end":{"line":157,"column":9}},"71":{"start":{"line":155,"column":12},"end":{"line":155,"column":75}},"72":{"start":{"line":156,"column":12},"end":{"line":156,"column":19}},"73":{"start":{"line":159,"column":8},"end":{"line":159,"column":52}},"74":{"start":{"line":160,"column":8},"end":{"line":160,"column":110}},"75":{"start":{"line":161,"column":8},"end":{"line":161,"column":71}},"76":{"start":{"line":164,"column":8},"end":{"line":164,"column":20}},"77":{"start":{"line":167,"column":0},"end":{"line":167,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"logAudit","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":17}},"loc":{"start":{"line":18,"column":56},"end":{"line":29,"column":1}},"line":18},"8":{"name":"(anonymous_8)","decl":{"start":{"line":30,"column":20},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":34},"end":{"line":32,"column":2}},"line":30},"9":{"name":"(anonymous_9)","decl":{"start":{"line":30,"column":68},"end":{"line":30,"column":69}},"loc":{"start":{"line":30,"column":81},"end":{"line":32,"column":1}},"line":30},"10":{"name":"(anonymous_10)","decl":{"start":{"line":34,"column":20},"end":{"line":34,"column":21}},"loc":{"start":{"line":34,"column":40},"end":{"line":74,"column":2}},"line":34},"11":{"name":"(anonymous_11)","decl":{"start":{"line":34,"column":74},"end":{"line":34,"column":75}},"loc":{"start":{"line":34,"column":87},"end":{"line":74,"column":1}},"line":34},"12":{"name":"(anonymous_12)","decl":{"start":{"line":60,"column":38},"end":{"line":60,"column":39}},"loc":{"start":{"line":60,"column":49},"end":{"line":60,"column":108}},"line":60},"13":{"name":"(anonymous_13)","decl":{"start":{"line":76,"column":21},"end":{"line":76,"column":22}},"loc":{"start":{"line":76,"column":41},"end":{"line":104,"column":2}},"line":76},"14":{"name":"(anonymous_14)","decl":{"start":{"line":76,"column":75},"end":{"line":76,"column":76}},"loc":{"start":{"line":76,"column":88},"end":{"line":104,"column":1}},"line":76},"15":{"name":"(anonymous_15)","decl":{"start":{"line":106,"column":19},"end":{"line":106,"column":20}},"loc":{"start":{"line":106,"column":39},"end":{"line":142,"column":2}},"line":106},"16":{"name":"(anonymous_16)","decl":{"start":{"line":106,"column":73},"end":{"line":106,"column":74}},"loc":{"start":{"line":106,"column":86},"end":{"line":142,"column":1}},"line":106},"17":{"name":"(anonymous_17)","decl":{"start":{"line":144,"column":19},"end":{"line":144,"column":20}},"loc":{"start":{"line":144,"column":39},"end":{"line":166,"column":2}},"line":144},"18":{"name":"(anonymous_18)","decl":{"start":{"line":144,"column":73},"end":{"line":144,"column":74}},"loc":{"start":{"line":144,"column":86},"end":{"line":166,"column":1}},"line":144}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":27,"column":4},"end":{"line":28,"column":31}},"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":28,"column":31}},{"start":{},"end":{}}],"line":27},"6":{"loc":{"start":{"line":36,"column":21},"end":{"line":36,"column":50}},"type":"binary-expr","locations":[{"start":{"line":36,"column":21},"end":{"line":36,"column":45}},{"start":{"line":36,"column":49},"end":{"line":36,"column":50}}],"line":36},"7":{"loc":{"start":{"line":37,"column":22},"end":{"line":37,"column":53}},"type":"binary-expr","locations":[{"start":{"line":37,"column":22},"end":{"line":37,"column":47}},{"start":{"line":37,"column":51},"end":{"line":37,"column":53}}],"line":37},"8":{"loc":{"start":{"line":121,"column":12},"end":{"line":123,"column":13}},"type":"if","locations":[{"start":{"line":121,"column":12},"end":{"line":123,"column":13}},{"start":{},"end":{}}],"line":121},"9":{"loc":{"start":{"line":126,"column":8},"end":{"line":128,"column":9}},"type":"if","locations":[{"start":{"line":126,"column":8},"end":{"line":128,"column":9}},{"start":{},"end":{}}],"line":126},"10":{"loc":{"start":{"line":129,"column":8},"end":{"line":131,"column":9}},"type":"if","locations":[{"start":{"line":129,"column":8},"end":{"line":131,"column":9}},{"start":{},"end":{}}],"line":129},"11":{"loc":{"start":{"line":136,"column":31},"end":{"line":136,"column":104}},"type":"binary-expr","locations":[{"start":{"line":136,"column":32},"end":{"line":136,"column":90}},{"start":{"line":136,"column":95},"end":{"line":136,"column":104}}],"line":136},"12":{"loc":{"start":{"line":136,"column":32},"end":{"line":136,"column":90}},"type":"cond-expr","locations":[{"start":{"line":136,"column":76},"end":{"line":136,"column":82}},{"start":{"line":136,"column":85},"end":{"line":136,"column":90}}],"line":136},"13":{"loc":{"start":{"line":136,"column":32},"end":{"line":136,"column":73}},"type":"binary-expr","locations":[{"start":{"line":136,"column":32},"end":{"line":136,"column":56}},{"start":{"line":136,"column":60},"end":{"line":136,"column":73}}],"line":136},"14":{"loc":{"start":{"line":150,"column":8},"end":{"line":153,"column":9}},"type":"if","locations":[{"start":{"line":150,"column":8},"end":{"line":153,"column":9}},{"start":{},"end":{}}],"line":150},"15":{"loc":{"start":{"line":154,"column":8},"end":{"line":157,"column":9}},"type":"if","locations":[{"start":{"line":154,"column":8},"end":{"line":157,"column":9}},{"start":{},"end":{}}],"line":154},"16":{"loc":{"start":{"line":160,"column":31},"end":{"line":160,"column":104}},"type":"binary-expr","locations":[{"start":{"line":160,"column":32},"end":{"line":160,"column":90}},{"start":{"line":160,"column":95},"end":{"line":160,"column":104}}],"line":160},"17":{"loc":{"start":{"line":160,"column":32},"end":{"line":160,"column":90}},"type":"cond-expr","locations":[{"start":{"line":160,"column":76},"end":{"line":160,"column":82}},{"start":{"line":160,"column":85},"end":{"line":160,"column":90}}],"line":160},"18":{"loc":{"start":{"line":160,"column":32},"end":{"line":160,"column":73}},"type":"binary-expr","locations":[{"start":{"line":160,"column":32},"end":{"line":160,"column":56}},{"start":{"line":160,"column":60},"end":{"line":160,"column":73}}],"line":160}},"s":{"0":4,"1":7,"2":3,"3":10,"4":7,"5":7,"6":0,"7":0,"8":0,"9":0,"10":17,"11":10,"12":4,"13":4,"14":4,"15":4,"16":4,"17":4,"18":110,"19":110,"20":10,"21":4,"22":1,"23":1,"24":4,"25":4,"26":3,"27":3,"28":3,"29":3,"30":3,"31":3,"32":2,"33":1,"34":2,"35":1,"36":4,"37":4,"38":1,"39":1,"40":1,"41":1,"42":0,"43":4,"44":4,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":6,"52":0,"53":1,"54":0,"55":1,"56":0,"57":1,"58":0,"59":0,"60":1,"61":4,"62":4,"63":4,"64":4,"65":4,"66":4,"67":4,"68":1,"69":1,"70":3,"71":2,"72":2,"73":1,"74":0,"75":0,"76":1,"77":4},"f":{"0":10,"1":7,"2":3,"3":10,"4":7,"5":0,"6":17,"7":110,"8":1,"9":1,"10":3,"11":3,"12":1,"13":1,"14":1,"15":1,"16":1,"17":4,"18":4},"b":{"0":[4,4,4],"1":[4,3],"2":[10,10],"3":[10,7],"4":[10,10],"5":[10,100],"6":[3,3],"7":[3,2],"8":[0,6],"9":[0,1],"10":[0,1],"11":[0,0],"12":[0,0],"13":[0,0],"14":[1,3],"15":[2,1],"16":[0,0],"17":[0,0],"18":[0,0]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/adminController.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/controllers/adminController.ts"],"names":[],"mappings":"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","sourcesContent":["import { Request, Response, RequestHandler, NextFunction } from \"express\";\r\nimport { PrismaClient } from \"@prisma/client\";\r\nimport { Role, UserResponse, UsersListResponse, MessageResponse } from \"../types\";\r\n\r\n// Extend Express Request interface to include 'user'\r\ndeclare global {\r\n  namespace Express {\r\n    interface User {\r\n      id: string;\r\n      [key: string]: any;\r\n    }\r\n    interface Request {\r\n      user?: User;\r\n    }\r\n  }\r\n}\r\n\r\nconst prisma = new PrismaClient();\r\n\r\n// In-memory audit log (for demo; use DB in production)\r\nexport const auditLog: Array<{\r\n  id: number;\r\n  action: string;\r\n  userId?: string;\r\n  performedBy: string;\r\n  timestamp: string;\r\n  details?: any;\r\n}> = [];\r\n\r\nexport function logAudit(\r\n  action: string,\r\n  performedBy: string,\r\n  userId?: string,\r\n  details?: any,\r\n) {\r\n  auditLog.unshift({\r\n    id: Date.now() + Math.random(),\r\n    action,\r\n    userId,\r\n    performedBy,\r\n    timestamp: new Date().toISOString(),\r\n    details,\r\n  });\r\n  if (auditLog.length > 100) auditLog.pop();\r\n}\r\n\r\nexport const getAuditLog = async (req: Request, res: Response) => {\r\n  res.status(200).json({ log: auditLog.slice(0, 50) });\r\n};\r\n\r\nexport const getAllUsers = async (\r\n  req: Request,\r\n  res: Response<UsersListResponse | MessageResponse>,\r\n  next: NextFunction\r\n): Promise<Response<UsersListResponse | MessageResponse> | any> => {\r\n  try {\r\n    const page = parseInt(req.query.page as string) || 1;\r\n    const limit = parseInt(req.query.limit as string) || 10;\r\n    const skip = (page - 1) * limit;\r\n\r\n    const [users, totalCount] = await Promise.all([\r\n      prisma.user.findMany({\r\n        skip,\r\n        take: limit,\r\n        select: {\r\n          id: true,\r\n          firstName: true,\r\n          lastName: true,\r\n          email: true,\r\n          registrationNumber: true,\r\n          dateOfBirth: true,\r\n          role: true,\r\n          createdAt: true,\r\n          password: true,\r\n          updatedAt: true,\r\n        },\r\n        orderBy: { createdAt: \"desc\" },\r\n      }),\r\n      prisma.user.count(),\r\n    ]);\r\n\r\n    // Map Prisma role to your application's Role type\r\n    const mappedUsers = users.map((user) => ({\r\n      ...user,\r\n      role: user.role as Role,\r\n    }));\r\n\r\n    return res.status(200).json({\r\n      users: mappedUsers,\r\n      pagination: {\r\n        total: totalCount,\r\n        page,\r\n        limit,\r\n        totalPages: Math.ceil(totalCount / limit),\r\n      },\r\n    });\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n\r\nexport const getAnalytics = async (req: Request, res: Response, next: NextFunction): Promise<Response | any> => {\r\n  try {\r\n    const [totalUsers, totalAdmins, totalStudents, recentUsers] =\r\n      await Promise.all([\r\n        prisma.user.count(),\r\n        prisma.user.count({ where: { role: \"admin\" } }),\r\n        prisma.user.count({ where: { role: \"student\" } }),\r\n        prisma.user.findMany({\r\n          orderBy: { createdAt: \"desc\" },\r\n          take: 5,\r\n          select: {\r\n            id: true,\r\n            firstName: true,\r\n            lastName: true,\r\n            email: true,\r\n            createdAt: true,\r\n          },\r\n        }),\r\n      ]);\r\n    return res.status(200).json({\r\n      totalUsers,\r\n      totalAdmins,\r\n      totalStudents,\r\n      recentUsers,\r\n    });\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n\r\nexport const updateUser = async (\r\n  req: Request,\r\n  res: Response<MessageResponse>,\r\n  next: NextFunction,\r\n): Promise<Response<MessageResponse> | any> => {\r\n  try {\r\n    const userId = req.params.id;\r\n    // Only allow editable fields\r\n    const allowedFields = [\r\n      'firstName',\r\n      'lastName',\r\n      'email',\r\n      'dateOfBirth',\r\n      'registrationNumber',\r\n      'role',\r\n    ];\r\n    const userData: any = {};\r\n    for (const field of allowedFields) {\r\n      if (req.body[field] !== undefined) {\r\n        userData[field] = req.body[field];\r\n      }\r\n    }\r\n    // Convert dateOfBirth string to Date object for Prisma\r\n    if (userData.dateOfBirth) {\r\n      userData.dateOfBirth = new Date(userData.dateOfBirth);\r\n    }\r\n    if (!userId) {\r\n      return res.status(400).json({ message: \"User ID is required\" });\r\n    }\r\n    await prisma.user.update({\r\n      where: { id: userId },\r\n      data: userData,\r\n    });\r\n    logAudit(\"updateUser\", req.user?.id || \"unknown\", userId, userData);\r\n    return res.status(200).json({ message: \"User updated successfully\" });\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n\r\nexport const deleteUser = async (\r\n  req: Request,\r\n  res: Response<MessageResponse>,\r\n  next: NextFunction,\r\n): Promise<void> => {\r\n  try {\r\n    const { id } = req.params;\r\n\r\n    // Check if user exists\r\n    const existingUser = await prisma.user.findUnique({ where: { id } });\r\n    if (!existingUser) {\r\n      res.status(404).json({ message: \"User not found\" });\r\n      return;\r\n    }\r\n    if (existingUser.role === \"admin\") {\r\n      res.status(403).json({ message: \"Cannot delete admin users\" });\r\n      return;\r\n    }\r\n\r\n    // Delete user from the database\r\n    await prisma.user.delete({ where: { id } });\r\n    logAudit(\"deleteUser\", req.user?.id || \"unknown\", id);\r\n    res.status(200).json({ message: \"User deleted successfully\" });\r\n  } catch (error) {\r\n    next(error);\r\n  }\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cb65247aa3fcff85b1f8f7d85a4b2575fec11bf9","contentHash":"3e03396d1b2d652cd5c47e4befa8f065c5f01a991ed29f766b8f228f120eb690"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\authorizeAdmin.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\middleware\\authorizeAdmin.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":23},"end":{"line":9,"column":1}},"2":{"start":{"line":4,"column":4},"end":{"line":7,"column":5}},"3":{"start":{"line":5,"column":8},"end":{"line":5,"column":67}},"4":{"start":{"line":6,"column":8},"end":{"line":6,"column":15}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":11}},"6":{"start":{"line":10,"column":0},"end":{"line":10,"column":33}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":23},"end":{"line":3,"column":24}},"loc":{"start":{"line":3,"column":43},"end":{"line":9,"column":1}},"line":3}},"branchMap":{"0":{"loc":{"start":{"line":4,"column":4},"end":{"line":7,"column":5}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":7,"column":5}},{"start":{},"end":{}}],"line":4}},"s":{"0":1,"1":1,"2":9,"3":1,"4":1,"5":8,"6":1},"f":{"0":9},"b":{"0":[1,8]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/authorizeAdmin.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/middleware/authorizeAdmin.ts"],"names":[],"mappings":";;AAMA,MAAM,cAAc,GAAmB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IACxD,IAAK,GAA4B,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;QACnD,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,uBAAuB,EAAE,CAAC,CAAC;QAC3D,OAAO;IACT,CAAC;IACD,IAAI,EAAE,CAAC;AACT,CAAC,CAAC;AAEF,kBAAe,cAAc,CAAC","sourcesContent":["import { Request, Response, NextFunction, RequestHandler } from \"express\";\n\ninterface AuthenticatedRequest extends Request {\n  role?: string;\n}\n\nconst authorizeAdmin: RequestHandler = (req, res, next) => {\n  if ((req as AuthenticatedRequest).role !== \"admin\") {\n    res.status(403).json({ message: \"Admin access required\" });\n    return;\n  }\n  next();\n};\n\nexport default authorizeAdmin;\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0d57a82c76516144354d85cb69dcfdd00e0c3ad7","contentHash":"4cd874cef09fb19fca48aedafeb94243be8ebc15cd8e27660b0276077c630484"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\validations\\userValidation.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\validations\\userValidation.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":34}},"2":{"start":{"line":4,"column":14},"end":{"line":4,"column":28}},"3":{"start":{"line":5,"column":0},"end":{"line":24,"column":3}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/validations/userValidation.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/validations/userValidation.ts"],"names":[],"mappings":";;;AAAA,6BAAwB;AAEX,QAAA,gBAAgB,GAAG,OAAC,CAAC,MAAM,CAAC;IACvC,IAAI,EAAE,OAAC,CAAC,MAAM,CAAC;QACb,SAAS,EAAE,OAAC;aACT,MAAM,EAAE;aACR,GAAG,CAAC,CAAC,EAAE,0CAA0C,CAAC;aAClD,QAAQ,EAAE;QACb,QAAQ,EAAE,OAAC;aACR,MAAM,EAAE;aACR,GAAG,CAAC,CAAC,EAAE,yCAAyC,CAAC;aACjD,QAAQ,EAAE;QACb,KAAK,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC,QAAQ,EAAE;QAC3D,WAAW,EAAE,OAAC;aACX,MAAM,EAAE;aACR,KAAK,CAAC,qBAAqB,EAAE,kCAAkC,CAAC;aAChE,QAAQ,EAAE;KACd,CAAC;IACF,MAAM,EAAE,OAAC,CAAC,MAAM,CAAC;QACf,EAAE,EAAE,OAAC,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC;KACvC,CAAC;CACH,CAAC,CAAC","sourcesContent":["import { z } from \"zod\";\n\nexport const updateUserSchema = z.object({\n  body: z.object({\n    firstName: z\n      .string()\n      .min(2, \"First name must be at least 2 characters\")\n      .optional(),\n    lastName: z\n      .string()\n      .min(2, \"Last name must be at least 2 characters\")\n      .optional(),\n    email: z.string().email(\"Invalid email address\").optional(),\n    dateOfBirth: z\n      .string()\n      .regex(/^\\d{4}-\\d{2}-\\d{2}$/, \"Invalid date format (YYYY-MM-DD)\")\n      .optional(),\n  }),\n  params: z.object({\n    id: z.string().uuid(\"Invalid user ID\"),\n  }),\n});\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"0aec72776c23be5928723ee8266a934ed6234fc5","contentHash":"090d188ede0d3744b6f25bad531cac5b0678a6bcb38f8ff735a063310aabba03"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\docs\\swagger.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\docs\\swagger.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}},"4":{"start":{"line":7,"column":29},"end":{"line":7,"column":75}},"5":{"start":{"line":8,"column":22},"end":{"line":8,"column":52}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":124}},"7":{"start":{"line":11,"column":4},"end":{"line":14,"column":7}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":58}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":44}},"10":{"start":{"line":15,"column":4},"end":{"line":15,"column":71}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"swaggerDocs","decl":{"start":{"line":9,"column":9},"end":{"line":9,"column":20}},"loc":{"start":{"line":9,"column":32},"end":{"line":16,"column":1}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":30},"end":{"line":11,"column":31}},"loc":{"start":{"line":11,"column":44},"end":{"line":14,"column":5}},"line":11}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":3,"7":3,"8":1,"9":1,"10":3},"f":{"0":1,"1":3,"2":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/docs/swagger.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/docs/swagger.ts"],"names":[],"mappings":";;;;;AAIA,8BAUC;AAdD,4EAA2C;AAE3C,qDAAkD;AAElD,SAAwB,WAAW,CAAC,GAAY,EAAE,IAAY;IAE5D,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,4BAAS,CAAC,KAAK,EAAE,4BAAS,CAAC,KAAK,CAAC,yBAAW,CAAC,CAAC,CAAC;IAEpE,GAAG,CAAC,GAAG,CAAC,gBAAgB,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;QACrC,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,kBAAkB,CAAC,CAAC;QAClD,GAAG,CAAC,IAAI,CAAC,yBAAW,CAAC,CAAC;IACxB,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,GAAG,CAAC,sCAAsC,IAAI,WAAW,CAAC,CAAC;AACrE,CAAC","sourcesContent":["import swaggerUi from \"swagger-ui-express\";\nimport { Express } from \"express\";\nimport { openApiSpec } from \"../docs/swaggerDocs\";\n\nexport default function swaggerDocs(app: Express, port: number) {\n\n  app.use(\"/api-docs\", swaggerUi.serve, swaggerUi.setup(openApiSpec));\n\n  app.get(\"/api-docs.json\", (req, res) => {\n    res.setHeader(\"Content-Type\", \"application/json\");\n    res.send(openApiSpec);\n  });\n\n  console.log(`Docs available at http://localhost:${port}/api-docs`);\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"df360fdb224b04e7d25a82a44337599fb782e4af","contentHash":"e7176ae67d1a9d3f19b33ddeb82a2a288643a43e991066015a1a638cc0444ab7"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\docs\\swaggerDocs.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\docs\\swaggerDocs.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":269,"column":2}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/docs/swaggerDocs.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/docs/swaggerDocs.ts"],"names":[],"mappings":"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","sourcesContent":["export const openApiSpec = {\r\n  openapi: \"3.0.0\",\r\n  info: {\r\n    title: \"Student Registration API\",\r\n    version: \"1.0.0\",\r\n    description: \"API for student registration system\",\r\n  },\r\n  components: {\r\n    securitySchemes: {\r\n      bearerAuth: {\r\n        type: \"http\",\r\n        scheme: \"bearer\",\r\n        bearerFormat: \"JWT\",\r\n      },\r\n    },\r\n    schemas: {\r\n      RegisterUser: {\r\n        type: \"object\",\r\n        properties: {\r\n          firstName: { type: \"string\" },\r\n          lastName: { type: \"string\" },\r\n          email: { type: \"string\", format: \"email\" },\r\n          password: { type: \"string\" },\r\n          dateOfBirth: { type: \"string\", format: \"date\" },\r\n        },\r\n        required: [\"firstName\", \"lastName\", \"email\", \"password\", \"dateOfBirth\"],\r\n      },\r\n      LoginUser: {\r\n        type: \"object\",\r\n        properties: {\r\n          email: { type: \"string\", format: \"email\" },\r\n          password: { type: \"string\" },\r\n        },\r\n        required: [\"email\", \"password\"],\r\n      },\r\n      UpdateUser: {\r\n        type: \"object\",\r\n        properties: {\r\n          firstName: { type: \"string\" },\r\n          lastName: { type: \"string\" },\r\n          email: { type: \"string\", format: \"email\" },\r\n          registrationNumber: { type: \"string\" },\r\n        },\r\n      },\r\n    },\r\n  },\r\n  security: [{ bearerAuth: [] }],\r\n  paths: {\r\n    \"/api/register\": {\r\n      post: {\r\n        summary: \"Register a new student\",\r\n        tags: [\"Auth\"],\r\n        requestBody: {\r\n          required: true,\r\n          content: {\r\n            \"application/json\": {\r\n              schema: { $ref: \"#/components/schemas/RegisterUser\" },\r\n            },\r\n          },\r\n        },\r\n        responses: {\r\n          201: { description: \"Student registered successfully\" },\r\n          400: { description: \"Bad request\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/login\": {\r\n      post: {\r\n        summary: \"Login a user\",\r\n        tags: [\"Auth\"],\r\n        requestBody: {\r\n          required: true,\r\n          content: {\r\n            \"application/json\": {\r\n              schema: { $ref: \"#/components/schemas/LoginUser\" },\r\n            },\r\n          },\r\n        },\r\n        responses: {\r\n          200: { description: \"Login successful\" },\r\n          400: { description: \"Bad request\" },\r\n          401: { description: \"Invalid credentials\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/profile\": {\r\n      get: {\r\n        summary: \"Get the authenticated user's profile\",\r\n        tags: [\"User\"],\r\n        security: [{ bearerAuth: [] }],\r\n        responses: {\r\n          200: { description: \"User profile data\" },\r\n          401: { description: \"Unauthorized\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/user/{id}/qrcode\": {\r\n      get: {\r\n        summary: \"Get a QR code for a user's name, email, and registration number\",\r\n        tags: [\"User\"],\r\n        parameters: [\r\n          {\r\n            in: \"path\",\r\n            name: \"id\",\r\n            required: true,\r\n            schema: { type: \"string\" },\r\n            description: \"User ID\",\r\n          },\r\n        ],\r\n        responses: {\r\n          200: {\r\n            description: \"QR code image\",\r\n            content: {\r\n              \"image/png\": {\r\n                schema: { type: \"string\", format: \"binary\" },\r\n              },\r\n            },\r\n          },\r\n          404: { description: \"User not found\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/user/{id}/qrcode/test\": {\r\n      get: {\r\n        summary: \"Test QR code generation for a user (returns sample QR code)\",\r\n        tags: [\"User\"],\r\n        parameters: [\r\n          {\r\n            in: \"path\",\r\n            name: \"id\",\r\n            required: true,\r\n            schema: { type: \"string\" },\r\n            description: \"User ID (use a valid or sample ID)\",\r\n          },\r\n        ],\r\n        responses: {\r\n          200: {\r\n            description: \"Sample QR code image for testing\",\r\n            content: {\r\n              \"image/png\": {\r\n                schema: { type: \"string\", format: \"binary\" },\r\n              },\r\n            },\r\n          },\r\n          404: { description: \"User not found\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/admin/users\": {\r\n      get: {\r\n        summary: \"Get all users (admin only)\",\r\n        tags: [\"Admin\"],\r\n        security: [{ bearerAuth: [] }],\r\n        parameters: [\r\n          { in: \"query\", name: \"page\", schema: { type: \"integer\" }, description: \"Page number\" },\r\n          { in: \"query\", name: \"limit\", schema: { type: \"integer\" }, description: \"Number of users per page\" },\r\n        ],\r\n        responses: {\r\n          200: { description: \"List of users\" },\r\n          401: { description: \"Unauthorized\" },\r\n          403: { description: \"Admin access required\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/admin/users/{id}\": {\r\n      put: {\r\n        summary: \"Update a user (admin only)\",\r\n        tags: [\"Admin\"],\r\n        security: [{ bearerAuth: [] }],\r\n        parameters: [\r\n          { in: \"path\", name: \"id\", required: true, schema: { type: \"string\" }, description: \"User ID\" },\r\n        ],\r\n        requestBody: {\r\n          required: true,\r\n          content: {\r\n            \"application/json\": {\r\n              schema: { $ref: \"#/components/schemas/UpdateUser\" },\r\n            },\r\n          },\r\n        },\r\n        responses: {\r\n          200: { description: \"User updated successfully\" },\r\n          400: { description: \"Bad request\" },\r\n          401: { description: \"Unauthorized\" },\r\n          403: { description: \"Admin access required\" },\r\n        },\r\n      },\r\n      delete: {\r\n        summary: \"Delete a user (admin only)\",\r\n        tags: [\"Admin\"],\r\n        security: [{ bearerAuth: [] }],\r\n        parameters: [\r\n          { in: \"path\", name: \"id\", required: true, schema: { type: \"string\" }, description: \"User ID\" },\r\n        ],\r\n        responses: {\r\n          200: { description: \"User deleted successfully\" },\r\n          401: { description: \"Unauthorized\" },\r\n          403: { description: \"Admin access required\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/admin/analytics\": {\r\n      get: {\r\n        summary: \"Get user analytics (admin only)\",\r\n        tags: [\"Admin\"],\r\n        security: [{ bearerAuth: [] }],\r\n        responses: {\r\n          200: { description: \"User analytics data\" },\r\n          401: { description: \"Unauthorized\" },\r\n          403: { description: \"Admin access required\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/users/{id}\": {\r\n      get: {\r\n        summary: \"Get user by ID (admin or self)\",\r\n        tags: [\"User\"],\r\n        security: [{ bearerAuth: [] }],\r\n        parameters: [\r\n          {\r\n            in: \"path\",\r\n            name: \"id\",\r\n            required: true,\r\n            schema: { type: \"string\" },\r\n            description: \"User ID\",\r\n          },\r\n        ],\r\n        responses: {\r\n          200: { description: \"User data\" },\r\n          401: { description: \"Unauthorized\" },\r\n          404: { description: \"User not found\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/admin/audit-log\": {\r\n      get: {\r\n        summary: \"Get admin audit log (admin only)\",\r\n        tags: [\"Admin\"],\r\n        security: [{ bearerAuth: [] }],\r\n        responses: {\r\n          200: { description: \"Audit log data\" },\r\n          401: { description: \"Unauthorized\" },\r\n          403: { description: \"Admin access required\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/test\": {\r\n      get: {\r\n        summary: \"Test route (health check)\",\r\n        tags: [\"Misc\"],\r\n        responses: {\r\n          200: { description: \"Test route is working\" },\r\n        },\r\n      },\r\n    },\r\n    \"/api/\": {\r\n      get: {\r\n        summary: \"Root route (health check)\",\r\n        tags: [\"Misc\"],\r\n        responses: {\r\n          200: { description: \"Server is running\" },\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"216ab7aa0f4ea45d4005ce581861e4a0e9060ae1","contentHash":"a649d4b6f9203913e44fb456a137eb16e1e9088b5ee2c1c32155fcea2abd1db6"},"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\utils\\logTestResult.ts":{"path":"C:\\Users\\LENOVO\\OneDrive\\Desktop\\b\\stu_2\\student-registration-backend\\src\\utils\\logTestResult.ts","statementMap":{"0":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"1":{"start":{"line":3,"column":28},"end":{"line":3,"column":110}},"2":{"start":{"line":3,"column":91},"end":{"line":3,"column":106}},"3":{"start":{"line":4,"column":4},"end":{"line":9,"column":7}},"4":{"start":{"line":5,"column":36},"end":{"line":5,"column":97}},"5":{"start":{"line":5,"column":42},"end":{"line":5,"column":70}},"6":{"start":{"line":5,"column":85},"end":{"line":5,"column":95}},"7":{"start":{"line":6,"column":35},"end":{"line":6,"column":100}},"8":{"start":{"line":6,"column":41},"end":{"line":6,"column":73}},"9":{"start":{"line":6,"column":88},"end":{"line":6,"column":98}},"10":{"start":{"line":7,"column":32},"end":{"line":7,"column":116}},"11":{"start":{"line":8,"column":8},"end":{"line":8,"column":78}},"12":{"start":{"line":11,"column":0},"end":{"line":11,"column":62}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":38}},"14":{"start":{"line":13,"column":17},"end":{"line":13,"column":42}},"15":{"start":{"line":14,"column":15},"end":{"line":14,"column":42}},"16":{"start":{"line":16,"column":4},"end":{"line":24,"column":7}},"17":{"start":{"line":17,"column":8},"end":{"line":23,"column":11}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":44},"end":{"line":2,"column":45}},"loc":{"start":{"line":2,"column":89},"end":{"line":10,"column":1}},"line":2},"1":{"name":"adopt","decl":{"start":{"line":3,"column":13},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":26},"end":{"line":3,"column":112}},"line":3},"2":{"name":"(anonymous_2)","decl":{"start":{"line":3,"column":70},"end":{"line":3,"column":71}},"loc":{"start":{"line":3,"column":89},"end":{"line":3,"column":108}},"line":3},"3":{"name":"(anonymous_3)","decl":{"start":{"line":4,"column":36},"end":{"line":4,"column":37}},"loc":{"start":{"line":4,"column":63},"end":{"line":9,"column":5}},"line":4},"4":{"name":"fulfilled","decl":{"start":{"line":5,"column":17},"end":{"line":5,"column":26}},"loc":{"start":{"line":5,"column":34},"end":{"line":5,"column":99}},"line":5},"5":{"name":"rejected","decl":{"start":{"line":6,"column":17},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":33},"end":{"line":6,"column":102}},"line":6},"6":{"name":"step","decl":{"start":{"line":7,"column":17},"end":{"line":7,"column":21}},"loc":{"start":{"line":7,"column":30},"end":{"line":7,"column":118}},"line":7},"7":{"name":"logTestResult","decl":{"start":{"line":15,"column":9},"end":{"line":15,"column":22}},"loc":{"start":{"line":15,"column":48},"end":{"line":25,"column":1}},"line":15},"8":{"name":"(anonymous_8)","decl":{"start":{"line":16,"column":43},"end":{"line":16,"column":44}},"loc":{"start":{"line":16,"column":56},"end":{"line":24,"column":5}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":16},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":17},"end":{"line":2,"column":21}},{"start":{"line":2,"column":25},"end":{"line":2,"column":39}},{"start":{"line":2,"column":44},"end":{"line":10,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":35},"end":{"line":3,"column":109}},"type":"cond-expr","locations":[{"start":{"line":3,"column":56},"end":{"line":3,"column":61}},{"start":{"line":3,"column":64},"end":{"line":3,"column":109}}],"line":3},"2":{"loc":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"type":"binary-expr","locations":[{"start":{"line":4,"column":16},"end":{"line":4,"column":17}},{"start":{"line":4,"column":22},"end":{"line":4,"column":33}}],"line":4},"3":{"loc":{"start":{"line":7,"column":32},"end":{"line":7,"column":115}},"type":"cond-expr","locations":[{"start":{"line":7,"column":46},"end":{"line":7,"column":67}},{"start":{"line":7,"column":70},"end":{"line":7,"column":115}}],"line":7},"4":{"loc":{"start":{"line":8,"column":51},"end":{"line":8,"column":67}},"type":"binary-expr","locations":[{"start":{"line":8,"column":51},"end":{"line":8,"column":61}},{"start":{"line":8,"column":65},"end":{"line":8,"column":67}}],"line":8},"5":{"loc":{"start":{"line":21,"column":23},"end":{"line":21,"column":36}},"type":"binary-expr","locations":[{"start":{"line":21,"column":23},"end":{"line":21,"column":28}},{"start":{"line":21,"column":32},"end":{"line":21,"column":36}}],"line":21}},"s":{"0":1,"1":7,"2":7,"3":7,"4":7,"5":7,"6":0,"7":0,"8":0,"9":0,"10":14,"11":7,"12":1,"13":1,"14":1,"15":1,"16":7,"17":7},"f":{"0":7,"1":7,"2":7,"3":7,"4":7,"5":0,"6":14,"7":7,"8":7},"b":{"0":[1,1,1],"1":[0,7],"2":[7,7],"3":[7,7],"4":[7,7],"5":[7,7]},"inputSourceMap":{"version":3,"file":"C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/utils/logTestResult.ts","sources":["C:/Users/LENOVO/OneDrive/Desktop/b/stu_2/student-registration-backend/src/utils/logTestResult.ts"],"names":[],"mappings":";;;;;;;;;;;AAIA,sCAQC;AAZD,2CAA8C;AAE9C,MAAM,MAAM,GAAG,IAAI,qBAAY,EAAE,CAAC;AAElC,SAAsB,aAAa,CAAC,QAAgB,EAAE,MAAc,EAAE,KAAc;;QAClF,MAAM,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC;YAC7B,IAAI,EAAE;gBACJ,QAAQ;gBACR,MAAM;gBACN,KAAK,EAAE,KAAK,IAAI,IAAI;aACrB;SACF,CAAC,CAAC;IACL,CAAC;CAAA","sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst prisma = new PrismaClient();\r\n\r\nexport async function logTestResult(testName: string, status: string, error?: string) {\r\n  await prisma.testResult.create({\r\n    data: {\r\n      testName,\r\n      status,\r\n      error: error || null,\r\n    },\r\n  });\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3fffb9993dbe6615824c1adec1a73b28cd5442fd","contentHash":"dda1b9c7376ee6fc1889887409db8ccfed79728fbbcadae396c713ebadc12e24"}}